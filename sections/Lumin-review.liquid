{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}
<style>
  .star-rating .star {
    width: 24px;
    height: 24px;
    margin-right: 2px;
    vertical-align: middle;
  }
  .zoom-top {
    zoom: {{ section.settings.star_size_top }};
  }
  .zoom-bottom {
    zoom: {{ section.settings.star_size }};
  }
  
  /* Review Popup Modal Styles */
  .review-popup-modal {
    display: none;
    position: fixed;
    z-index: 10000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
    backdrop-filter: blur(5px);
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .review-popup-modal.show {
    opacity: 1;
  }
  
  .review-popup-content {
    background-color: #fff;
    margin: 2% auto;
    padding: 0;
    border-radius: 16px;
    width: 95%;
    overflow: auto;
    max-width: 600px;
    max-height: 90vh;
    position: relative;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    transform: scale(0.9);
    transition: transform 0.3s ease;
  }
  
  .review-popup-modal.show .review-popup-content {
    transform: scale(1);
  }
  
  .review-popup-close {
    position: absolute;
    right: 20px;
    top: 20px;
    width: 40px;
    height: 40px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
    border: none;
    font-size: 24px;
    color: #333;
  }
  
  .review-popup-close:hover {
    background: #fff;
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }
  
  .review-popup-header {
    padding: 30px 30px 20px 30px;
    border-bottom: 1px solid #f0f0f0;
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
  }
  
  .review-popup-customer {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 15px;
  }
  
 /* .review-popup-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }*/
  
  .review-popup-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .review-popup-customer-info h3 {
    margin: 0 0 5px 0;
    font-size: 20px;
    font-weight: 600;
    color: #333;
  }
  
  .review-popup-date {
    color: #666;
    font-size: 14px;
    margin: 0;
  }
  
  .review-popup-rating {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .review-popup-stars {
    display: flex;
    gap: 2px;
  }
  
  .review-popup-stars svg {
    width: 20px;
    height: 20px;
    fill: {{ section.settings.feature_svg_color }};
  }
  
  .review-popup-rating-text {
    color: #666;
    font-size: 14px;
    font-weight: 500;
  }
  
  .review-popup-body {
    padding: 25px 30px 30px 30px;
  }
  
  .review-popup-title {
    font-size: 22px;
    font-weight: 600;
    color: #333;
    margin: 0 0 20px 0;
    line-height: 1.3;
  }
  
  .review-popup-text {
    font-size: 16px;
    line-height: 1.6;
    color: #555;
    margin: 0 0 25px 0;
  }
  
  .review-popup-images {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
    align-items: start;
  }
  
  .review-popup-image {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
    position: relative;
    height: auto;
  }
  
  .review-popup-image:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }
  
  .review-popup-image img {
    width: 100%;
    height: auto;
    object-fit: contain;
    display: block;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    backface-visibility: hidden;
    transform: translateZ(0);
  }
  
  /* Ensure crisp rendering for high-DPI displays */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .review-popup-image img {
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
    }
  }
  
  /* Ensure images maintain their natural aspect ratio */
  .review-popup-image img {
    max-height: 400px;
    max-width: 100%;
    object-position: center;
    border-radius: 8px;
  }
  
  /* Ensure grid items align properly with different aspect ratios */
  .review-popup-images {
    align-items: start;
    justify-items: center;
  }
  
  /* Handle very wide images gracefully */
  .review-popup-image img[style*="width: 100%"] {
    height: auto !important;
  }
  
  /* Ensure images don't exceed container width */
  .review-popup-image {
    max-width: 100%;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Center images within their containers */
  .review-popup-image img {
    display: block;
    margin: 0 auto;
  }
  
  /* Handle edge cases for very small or very large images */
  .review-popup-image img {
    min-width: 100px;
    min-height: 100px;
  }
  
  /* Ensure proper spacing between images */
  .review-popup-images {
    gap: 20px;
  }
  
  /* Responsive adjustments for popup images */
  @media screen and (max-width: 768px) {
    .review-popup-images {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .review-popup-image img {
      max-height: 300px;
      min-width: 80px;
      min-height: 80px;
    }
  }
  
  /* Handle very small screens */
  @media screen and (max-width: 480px) {
    .review-popup-images {
      gap: 10px;
    }
    
    .review-popup-image img {
      max-height: 250px;
      min-width: 60px;
      min-height: 60px;
    }
  }
  
  /* Image loading states */
  .review-popup-image {
    position: relative;
  }
  
  .review-popup-image::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 30px;
    height: 30px;
    border: 3px solid #f3f3f3;
    border-top: 3px solid {{ section.settings.feature_svg_color }};
    border-radius: 50%;
    animation: spin 1s linear infinite;
    opacity: 0.7;
    z-index: 1;
    pointer-events: none;
  }
  
  .review-popup-image.loaded::before {
    display: none;
  }
  
  @keyframes spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
  }
  
  /* Enhanced image hover effects */
  .review-popup-image:hover::after {
    content: 'üîç';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px;
    color: white;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 2;
  }
  
  .review-popup-image:hover::after {
    opacity: 1;
  }
  
  /* Focus states for accessibility */
  .review-popup-image:focus-within {
    outline: 2px solid {{ section.settings.feature_svg_color }};
    outline-offset: 2px;
  }
  
  /* Ensure images are properly accessible */
  .review-popup-image img {
    alt: attr(alt);
    role: "img";
  }
  
  /* Performance optimizations for images */
  .review-popup-image img {
    will-change: transform;
    backface-visibility: hidden;
    transform: translateZ(0);
  }
  
  /* Loading state improvements */
  .review-popup-image.loading img {
    opacity: 0.7;
    filter: blur(1px);
  }
  
  .review-popup-footer {
    padding: 20px 30px;
    background: #f8f9fa;
    border-top: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
  }
  
  .review-popup-product {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
    min-width: 200px;
  }
  
  .review-popup-product-image {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    overflow: hidden;
    background: #fff;
    border: 1px solid #e0e0e0;
  }
  
  .review-popup-product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .review-popup-product-title {
    font-size: 14px;
    font-weight: 500;
    color: #333;
    line-height: 1.3;
  }
  
  .review-popup-helpful {
    display: flex;
    align-items: center;
    gap: 15px;
    font-size: 14px;
    color: #666;
  }
  
  .review-popup-helpful-text {
    white-space: nowrap;
  }
  
  .review-popup-helpful-buttons {
    display: flex;
    gap: 8px;
  }
  
  .helpful-btn {
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 20px;
    padding: 6px 12px;
    font-size: 12px;
    color: #666;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 5px;
  }
  
  .helpful-btn:hover {
    background: #f0f0f0;
    border-color: #ccc;
  }
  
  .helpful-btn.active {
    background: {{ section.settings.feature_svg_color }};
    color: #fff;
    border-color: {{ section.settings.feature_svg_color }};
  }
  
  .helpful-btn svg {
    width: 14px;
    height: 14px;
    fill: currentColor;
  }
  
  /* Make review blocks clickable */
  .rw-container-contant {
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    position: relative;
  }
  
  .rw-container-contant:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
  }
  
  .rw-container-contant::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.02);
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
    border-radius: {{ section.settings.border_radius }}px;
  }
  
  .rw-container-contant:hover::after {
    opacity: 1;
  }
  
  /* Add a subtle indicator that the review is clickable */
  .rw-container-contant::before {
    content: 'üëÅ';
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 16px;
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
    z-index: 1;
  }
  
  .rw-container-contant:hover::before {
    opacity: 0.6;
  }
  
  /* Mobile responsive styles */
  @media screen and (max-width: 768px) {
    .review-popup-content {
      margin: 5% auto;
      width: 95%;
      max-width: none;
      border-radius: 12px;
    }
    
    .review-popup-header,
    .review-popup-body,
    .review-popup-footer {
      padding: 20px;
    }
    
   /* .review-popup-customer {
      flex-direction: column;
      text-align: center;
      gap: 10px;
    }*/
    
    .review-popup-avatar {
      width: 50px;
      height: 50px;
    }
    
    .review-popup-title {
      font-size: 20px;
    }
    
    .review-popup-text {
      font-size: 15px;
    }
    
    .review-popup-images {
      grid-template-columns: 1fr;
      gap: 10px;
    }
    
    .review-popup-footer {
      flex-direction: column;
      align-items: stretch;
      text-align: center;
    }
    
    .review-popup-product {
      justify-content: center;
      min-width: auto;
    }
    
    .review-popup-helpful {
      justify-content: center;
      flex-direction: column;
      gap: 10px;
    }
  }
  
  /* Animation keyframes */
  @keyframes popupFadeIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  @keyframes popupSlideIn {
    from {
      transform: translateY(-50px) scale(0.9);
      opacity: 0;
    }
    to {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
  }
  
  /* Thumbnail Gallery Styles */
  .review-thumbnail-gallery {
    margin: 30px 0;
    padding: 20px;
    background: var(--thumbnail-gallery-bg, #f8f8f8);
    border-radius: 12px;
    text-align: center;
    --thumbnail-size: var(--thumbnail-image-size, 120px);
  }
  
  .thumbnail-gallery-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--thumbnail-gallery-title-color, #333);
  }
  
  .thumbnail-gallery-grid {
    display: flex;
    justify-content: center;
    justify-items: center;
    flex-wrap: wrap;
    grid-template-columns: repeat(auto-fit, minmax(var(--thumbnail-size), 1fr));
    gap: 10px;
    max-width: 100%;
    margin: 0 auto;
  }
  
  .thumbnail-item {
    --color-review-accent: var(--thumbnail-gallery-accent-color, 0, 0, 0);
    position: relative;
    aspect-ratio: 1;
    border-radius: var(--thumbnail-border-radius, 8);
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    width: var(--thumbnail-size);
    height: var(--thumbnail-size);
  }
  
  .thumbnail-item:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(var(--color-review-accent),0.15);
    border: var(--thumbnail-border-thickness, 0)px solid rgba(var(--color-review-accent));
  }
  
  .thumbnail-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    opacity: 0;
    transition: opacity 0.3s ease;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    image-rendering: pixelated;
    backface-visibility: hidden;
    transform: translateZ(0);
    /* Ensure crisp rendering for small thumbnails */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
  }
  
  .thumbnail-item img.loaded {
    opacity: 1;
    border-radius: var(--thumbnail-border-radius, 8px);
  }
  
  /* Ensure crisp rendering for high-DPI displays */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .thumbnail-item img {
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
      image-rendering: pixelated;
      /* Force crisp rendering for small thumbnails on high-DPI displays */
      image-rendering: -webkit-optimize-contrast !important;
      image-rendering: -moz-crisp-edges !important;
      image-rendering: crisp-edges !important;
    }
  }
  
  .thumbnail-item.video-thumbnail::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 0;
    height: 0;
    border-left: 12px solid white;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
  }
  
  .thumbnail-item.video-thumbnail::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.3);
  }
  
  .thumbnail-item.loading {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
  }
  
  .thumbnail-item.loading img {
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  @keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  
  .thumbnail-item.empty {
    background: #f5f5f5;
    border: 2px dashed #ddd;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #999;
    font-size: 12px;
    text-align: center;
    padding: 10px;
  }
  
  .thumbnail-item.empty::before {
    content: 'üì∑';
    font-size: 20px;
    margin-bottom: 5px;
    display: block;
  }
  
  .thumbnail-gallery-empty {
    text-align: center;
    padding: 40px 20px;
    color: #666;
    font-style: italic;
  }
  
  @media screen and (max-width: 768px) {
    .thumbnail-gallery-grid {
      grid-template-columns: repeat(auto-fit, minmax(calc(var(--thumbnail-size) * 0.75), 1fr));
      gap: 10px;
      max-width: 100%;
    }
    
    .review-thumbnail-gallery {
      padding: 15px;
      margin: 20px 0;
    }
    
    .thumbnail-item {
      width: calc(var(--thumbnail-size) * 0.75);
      height: calc(var(--thumbnail-size) * 0.75);
    }
  }
  
  /* Handle very small thumbnails */
  .review-thumbnail-gallery[style*="--thumbnail-size: 40px"] .thumbnail-gallery-grid,
  .review-thumbnail-gallery[style*="--thumbnail-size: 50px"] .thumbnail-gallery-grid {
    grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
    gap: 8px;
  }
  
  /* Handle very large thumbnails */
  .review-thumbnail-gallery[style*="--thumbnail-size: 180px"] .thumbnail-gallery-grid,
  .review-thumbnail-gallery[style*="--thumbnail-size: 200px"] .thumbnail-gallery-grid {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 20px;
  }
  
  /* Ensure minimum spacing for small thumbnails */
  .review-thumbnail-gallery[style*="--thumbnail-size: 40px"] .thumbnail-item,
  .review-thumbnail-gallery[style*="--thumbnail-size: 50px"] .thumbnail-item {
    min-width: 40px;
    min-height: 40px;
  }
  
  /* Rating Summary Styles */
  .rating-summary {
    display: grid;
    {% if section.settings.show_add_review_button %}
    grid-template-columns: 1fr 2fr 1fr;
   {% else %}
    grid-template-columns: 1fr 2fr;
  {% endif %}
    gap: 30px;
    margin-bottom: 20px;
    padding: 30px;
    border-radius: 12px;
    align-items: center;
    position: relative;
  }
  
  .rating-summary::before {
    content: '';
    position: absolute;
    left: 33.33%;
    top: 20%;
    bottom: 20%;
    width: 0px;
    background-color: #e0e0e0;
  }
  
  .rating-summary::after {
    content: '';
    position: absolute;
    left: 66.66%;
    top: 20%;
    bottom: 20%;
    width: 0px;
    background-color: #e0e0e0;
  }
  
  .rating-summary-left {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    text-align: center;
  }
  
  .rating-summary-score {
    font-size: 48px;
    font-weight: bold;
    line-height: 1;
    color: #333;
  }
  
  .rating-summary-stars {
    display: flex;
    gap: 2px;
  }
  
  .rating-summary-stars svg {
    width: 24px;
    height: 24px;
    fill: {{ section.settings.feature_svg_color }};
  }
  
  .rating-summary-count {
    font-size: 14px;
    text-align: center;
    color: #666;
  }
  
  .rating-summary-breakdown {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  
  .rating-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 0px;
    padding: 4px 0;
  }
  
  .rating-bar-stars {
    display: flex;
    gap: 2px;
    min-width: 80px;
  }
  
  .rating-bar-stars svg {
    width: 16px;
    height: 16px;
  }
  
  .rating-bar-stars svg.filled {
    fill: {{ section.settings.feature_svg_color }};
  }
  
  .rating-bar-stars svg.empty {
    fill: {{ section.settings.inactive_star_color }};
  }
  
  .rating-bar-progress {
    flex: 1;
    height: 8px;
    border-radius: 4px;
    overflow: hidden;
    position: relative;
    background-color: #e0e0e0;
  }
  
  .rating-bar-fill {
    height: 100%;
    display: block !important;
    border-radius: 4px;
    transition: width 0.3s ease;
    background-color: #ffd700;
  }
  
  .rating-bar-count {
    min-width: 50px;
    font-size: 12px;
    text-align: right;
    color: #666;
  }
  
  .rating-summary-review-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 12px;
    padding: 0px 0px 0px 40px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 0;
    border-left: 1px solid #f0f0f0;
    border-top: 0;
    margin: 0;
    margin-left: 20px;
  }
  
  .review-cta-heading {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    color: #333;
  }
  
  .review-cta-subtext {
    font-size: 14px;
    margin: 0;
    color: #666;
    line-height: 1.4;
  }
  
  .review-cta-button {
    background: {{ section.settings.add_review_button_bg }};
    color: {{ section.settings.add_review_button_text_color }};
    border: 1px solid {{ section.settings.add_review_button_bg }};
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 12px;
    min-width: 140px;
    box-shadow: none;
}
  
  .review-cta-button:hover {
    background: {{ section.settings.add_review_button_text_color }};
    color: {{ section.settings.add_review_button_bg }} !important;
    transform: translateY(-1px);
    box-shadow: none;
  }
  .review-cta-button:after {
    box-shadow: none !important;
  }
  
  @media screen and (max-width: 768px) {
    .rating-summary {
      grid-template-columns: 1fr;
      gap: 20px;
      text-align: center;
    }
    
    .rating-summary::before,
    .rating-summary::after {
      display: none;
    }
    
    .rating-summary-breakdown {
      order: 2;
    }
    
    .rating-summary-review-cta {
      order: 3;
      padding: 40px 0px 10px 0px;
    border-radius: 0;
    border-top: 1px solid #f0f0f0;
    border-left: 0;
    margin: 0;
    margin-top: 20px;
    }
  }
</style>
{% if section.settings.star_style == 'star_bg' or section.settings.star_style == 'star_bg_2' %}
  <style>
    .rating {
      margin: 10px 0;
    }

    .rating i {
      display: inline-block;
      width: 34px;
      height: 34px;
      border-width: 0 16px;
      border-style: solid;
      border-color: {{ section.settings.inactive_star_color }};
      border-radius: {{ section.settings.star_radius }}px;
      color: white;
      background: {{ section.settings.inactive_star_color }};
      {% if section.settings.star_style == 'star_bg' %}
      padding: 0.3rem 0;
      line-height:43px;
      text-indent: -12px;
      {% else %}
      padding: 0;
      line-height:47px;
      text-indent: -12px;
      {% endif %}
      text-shadow: 1px 0 1px #b3b3b3;
    }
    .rating svg {
     {% if section.settings.star_style == 'star_bg' %} width:26px;{% else %}width:26px;{% endif %}
      height: auto;
      fill: #fff;
    }

    /** Colors */
    [data-rating^="1"] .star-1 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="1.5"] .star-2 {
      border-left-color: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="2"] .star-1 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="2"] .star-2 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="2.5"] .star-3 {
      border-left-color: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="3"] .star-1 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="3"] .star-2 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="3"] .star-3 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="3.5"] .star-4 {
      border-left-color: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="4"] .star-1 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="4"] .star-2 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="4"] .star-3 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="4"] .star-4 {
      border-color: {{ section.settings.feature_svg_color }};
      background: {{ section.settings.feature_svg_color }};
    }

    [data-rating^="4.5"] .star-5 {
      border-left-color: {{ section.settings.feature_svg_color }};
    }
    [data-rating^="4.6"] .star-5 {
      border-left-color: {{ section.settings.feature_svg_color }};
    }
    [data-rating^="4.7"] .star-5 {
      border-left-color: {{ section.settings.feature_svg_color }};
    }
                          [data-rating^="4.8"] .star-5 {
      border-left-color: {{ section.settings.feature_svg_color }};
    }
    [data-rating^="4.9"] .star-5 {
      border-left-color: {{ section.settings.feature_svg_color }};
    }

    [data-rating="5"] i {
      background: {{ section.settings.feature_svg_color }};
      border-color: {{ section.settings.feature_svg_color }};
    }
  </style>
{% endif %}

{%- if request.design_mode -%}
  <script src="{{ 'theme-editor.js' | asset_url }}" defer="defer"></script>
{%- endif -%}
{% assign scheme1 = settings.color_schemes | first %}
<div id="lmReview" class="rw-main-wrapper color-{{ section.settings.color_scheme }} gradient">
  <div class="rw-sub-wrapper page-width content-container isolate{% if settings.text_boxes_border_thickness > 0 and settings.text_boxes_border_opacity > 0 and settings.media_border_thickness > 0 and settings.media_border_opacity > 0 %} collapse-borders{% endif %}{% unless section.settings.color_scheme == scheme1 and settings.media_border_thickness > 0 and settings.text_boxes_shadow_opacity == 0 and settings.text_boxes_border_thickness == 0 or settings.text_boxes_border_opacity == 0 %} collapse-corners{% endunless %} section-{{ section.id }}-padding{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
    <div>
      <style>
        :root {
           --star-size: 20px;
           --star-color: {{ section.settings.inactive_star_color }};
           --star-background: {{ section.settings.feature_svg_color }};
         }
      </style>
      <h1 class="rw-title" style="text-align:center;">
        {{
          section.settings.header_text | replace: '[[', '<span class="lumin-text__fancy1">' | replace: ']]', '</span>' | replace: '!-', '<span class="lumin-text__fancyalt">' | replace: '-!', '</span>' | replace: '((', '<span class="lumin-text__fancy2">' | replace: '))', '</span>'
        }}
      </h1>
      {% if section.settings.show_top %}
        <div class="top-review-box">
          <div class="rating-box">
            <p style="margin: 0;font-size:40px;font-weight:bold; line-height: 1;">{{ section.settings.rating_text }}</p>
            {% if section.settings.star_style == 'star' %}
              {% render 'review-star', section: section %}
            {% elsif section.settings.star_style == 'star_bg' %}
              {% render 'review-star-background', section: section %}
            {% elsif section.settings.star_style == 'star_bg_2' %}
              {% render 'review-star-crisp', section: section %}
            {% endif %}
            {% unless section.settings.rating_count == blank %}
              <p style="margin: 0;text-align: center;">
                {{
                    section.settings.rating_count | replace: '[[', '<span class="lumin-text__fancy1">' | replace: ']]', '</span>' | replace: '!-', '<span class="lumin-text__fancyalt">' | replace: '-!', '</span>' | replace: '((', '<span class="lumin-text__fancy2">' | replace: '))', '</span>'
                }}
              </p>
            {% endunless %}
          </div>
        </div>
        <lr></lr>
      {% endif %}
      
      {% comment %} Thumbnail Gallery blocks will be rendered here {% endcomment %}
      
      {% comment %} Thumbnail Gallery Blocks {% endcomment %}
      {% for block in section.blocks %}
        {% if block.type == 'thumbnail_gallery' %}
          {% assign has_images = false %}
          {% assign image_count = 0 %}
          {% for review_block in section.blocks %}
            {% if review_block.type == 'review' %}
              {% if review_block.settings.img_block != blank %}
                {% assign has_images = true %}
                {% assign image_count = image_count | plus: 1 %}
              {% endif %}
              {% if review_block.settings.img_block2 != blank %}
                {% assign has_images = true %}
                {% assign image_count = image_count | plus: 1 %}
              {% endif %}
            {% endif %}
          {% endfor %}
          
          {% if has_images %}
            <div class="review-thumbnail-gallery" {{ block.shopify_attributes }} style="
              --thumbnail-gallery-bg: {{ block.settings.gallery_bg | default: '#f8f8f8' }};
              --thumbnail-gallery-title-color: {{ block.settings.gallery_title_color | default: '#333' }};
              --thumbnail-gallery-accent-color: {{ block.settings.gallery_accent_color.red }},{{ block.settings.gallery_accent_color.green }},{{ block.settings.gallery_accent_color.blue }};
              --thumbnail-border-thickness: {{ block.settings.border_thickness | default: 0 }};
              --thumbnail-border-radius: {{ block.settings.border_radius }}px;
              --thumbnail-image-size: {{ block.settings.image_size | default: 60 }}px;
            ">
              {% if block.settings.gallery_title != blank %}
                <div class="thumbnail-gallery-title" style="text-align: {{block.settings.thumbnail_align}};">
                  {{ block.settings.gallery_title }}
                  {% if image_count > 0 %}
                    <span style="font-size: 14px; font-weight: 400; color: #666; margin-left: 10px;">
                      ({{ image_count }} image{% if image_count != 1 %}s{% endif %})
                    </span>
                  {% endif %}
                </div>
              {% endif %}
              <div class="thumbnail-gallery-grid" style="justify-content: {{block.settings.thumbnail_align}};">
                {% for review_block in section.blocks %}
                  {% if review_block.type == 'review' %}
                    {% if review_block.settings.img_block != blank %}
                      <div class="thumbnail-item" data-review-index="{{ forloop.index }}" data-image-type="primary">
                        <img src="{{ review_block.settings.img_block | image_url: width: 300 }}" alt="{{ review_block.settings.name_text | append: ' review image' }}" loading="lazy" class="thumbnail-image" width="{{ block.settings.image_size | default: 60 }}" height="{{ block.settings.image_size | default: 60 }}">
                      </div>
                    {% endif %}
                    {% if review_block.settings.img_block2 != blank %}
                      <div class="thumbnail-item" data-review-index="{{ forloop.index }}" data-image-type="secondary">
                        <img src="{{ review_block.settings.img_block2 | image_url: width: 300 }}" alt="{{ review_block.settings.name_text | append: ' review image 2' }}" loading="lazy" class="thumbnail-image" width="{{ block.settings.image_size | default: 60 }}" height="{{ block.settings.image_size | default: 60 }}">
                      </div>
                    {% endif %}
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          {% else %}
            <div class="review-thumbnail-gallery" {{ block.shopify_attributes }} style="
              --thumbnail-gallery-bg: {{ block.settings.gallery_bg | default: '#f8f8f8' }};
              --thumbnail-gallery-title-color: {{ block.settings.gallery_title_color | default: '#333' }};
              --thumbnail-gallery-accent-color: {{ block.settings.gallery_accent_color.red }},{{ block.settings.gallery_accent_color.green }},{{ block.settings.gallery_accent_color.blue }};
              --thumbnail-border-thickness: {{ block.settings.border_thickness | default: 0 }};
              --thumbnail-border-radius: {{ block.settings.border_radius | default: 8 }}px;
              --thumbnail-image-size: {{ block.settings.image_size | default: 60 }}px;
            ">
              <div class="thumbnail-gallery-empty">
                <p>No review images available yet.</p>
                <p style="font-size: 14px; margin-top: 10px;">Add images to your review blocks to see them here.</p>
              </div>
            </div>
          {% endif %}
        {% endif %}
        {% comment %} Rating Summary Blocks {% endcomment %}
        {% if block.type == 'rating_summary' %}
          <div class="rating-summary" {{ block.shopify_attributes }} style="background: {{ block.settings.rating_summary_bg }};border-color: {{ block.settings.rating_summary_border_color }};border-radius: {{ block.settings.rating_summary_border_radius }}px;">
            <div class="rating-summary-left">
              <div class="rating-summary-score" style="color: {{ block.settings.rating_summary_score_color | default: '#333' }};">{{ block.settings.rating_summary_score | default: '4.7' }}</div>
              <div class="rating-summary-stars">
                {% for i in (1..5) %}
                  <svg viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                {% endfor %}
              </div>
              <div class="rating-summary-count" style="color: {{ block.settings.rating_summary_text_color | default: '#666' }};">{{ block.settings.rating_summary_total | default: '104 Reviews' }}</div>
            </div>
            
            <div class="rating-summary-breakdown">
              {% comment %} 5-Star Rating Bar {% endcomment %}
              <div class="rating-bar">
                <div class="rating-bar-stars">
                  {% for j in (1..5) %}
                    <svg class="filled" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  {% endfor %}
                </div>
                <div class="rating-bar-progress" style="background: {{ block.settings.rating_bar_bg }};">
                  <div class="rating-bar-fill" style="width: {{ block.settings.rating_bar_5_width | default: 74 }}%; background: {{ block.settings.rating_bar_fill | default: '#ffd700' }};"></div>
                </div>
                <div class="rating-bar-count" style="color: {{ block.settings.rating_summary_text_color | default: '#666' }};">{{ block.settings.rating_bar_5_width | default: 74 }}%</div>
              </div>
              
              {% comment %} 4-Star Rating Bar {% endcomment %}
              <div class="rating-bar">
                <div class="rating-bar-stars">
                  {% for j in (1..4) %}
                    <svg class="filled" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  {% endfor %}
                  <svg class="empty" viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                </div>
                <div class="rating-bar-progress" style="background: {{ block.settings.rating_bar_bg }};">
                  <div class="rating-bar-fill" style="width: {{ block.settings.rating_bar_4_width | default: 23 }}%; background: {{ block.settings.rating_bar_fill | default: '#ffd700' }};"></div>
                </div>
                <div class="rating-bar-count" style="color: {{ block.settings.rating_summary_text_color | default: '#666' }};">{{ block.settings.rating_bar_4_width | default: 23 }}%</div>
              </div>
              
              {% comment %} 3-Star Rating Bar {% endcomment %}
              <div class="rating-bar">
                <div class="rating-bar-stars">
                  {% for j in (1..3) %}
                    <svg class="filled" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  {% endfor %}
                  {% for j in (1..2) %}
                    <svg class="empty" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  {% endfor %}
                </div>
                <div class="rating-bar-progress" style="background: {{ block.settings.rating_bar_bg }};">
                  <div class="rating-bar-fill" style="width: {{ block.settings.rating_bar_3_width | default: 1 }}%; background: {{ block.settings.rating_bar_fill | default: '#e0e0e0' }};"></div>
                </div>
                <div class="rating-bar-count" style="color: {{ block.settings.rating_summary_text_color | default: '#666' }};">{{ block.settings.rating_bar_3_width | default: 1 }}%</div>
              </div>
              
              {% comment %} 2-Star Rating Bar {% endcomment %}
              <div class="rating-bar">
                <div class="rating-bar-stars">
                  {% for j in (1..2) %}
                    <svg class="filled" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  {% endfor %}
                  {% for j in (1..3) %}
                    <svg class="empty" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  {% endfor %}
                </div>
                <div class="rating-bar-progress" style="background: {{ block.settings.rating_bar_bg }};">
                  <div class="rating-bar-fill" style="width: {{ block.settings.rating_bar_2_width | default: 2 }}%; background: {{ block.settings.rating_bar_fill | default: '#e0e0e0' }};"></div>
                </div>
                <div class="rating-bar-count" style="color: {{ block.settings.rating_summary_text_color | default: '#666' }};">{{ block.settings.rating_bar_2_width | default: 2 }}%</div>
              </div>
              
              {% comment %} 1-Star Rating Bar {% endcomment %}
              <div class="rating-bar">
                <div class="rating-bar-stars">
                  <svg class="filled" viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                  {% for j in (1..4) %}
                    <svg class="empty" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  {% endfor %}
                </div>
                <div class="rating-bar-progress" style="background: {{ block.settings.rating_bar_bg }};">
                  <div class="rating-bar-fill" style="width: {{ block.settings.rating_bar_1_width | default: 0 }}%; background: {{ block.settings.rating_bar_fill | default: '#e0e0e0' }};"></div>
                </div>
                <div class="rating-bar-count" style="color: {{ block.settings.rating_summary_text_color | default: '#666' }};">{{ block.settings.rating_bar_1_width | default: 0 }}%</div>
              </div>
            </div>
            
            {% comment %} Review Call to Action Block {% endcomment %}
              {% if section.settings.show_add_review_button %}
            <div class="rating-summary-review-cta" style="background: {{ block.settings.rating_summary_bg }};">
              <h3 class="review-cta-heading" style="color: {{ section.settings.review_cta_heading_color }};">{{section.settings.review_cta_heading }}</h3>
              <p class="review-cta-subtext" style="color: {{ section.settings.review_cta_subtext_color }};">{{section.settings.review_cta_subtext }}</p>
             
                <button id="addReviewBtn" class="review-cta-button button">
                  {{ section.settings.add_review_button_text | default: 'Write a review' }}
                </button>
             
            </div>
             {% endif %}
          </div>
        {% endif %}
      {% endfor %}
      
      

    </div>
    <div class="load-more-container">
      <input class="visually-hidden" type="checkbox" id="load-more">
      <ul class="rw-container no-js-hidden">
        {% for block in section.blocks %}
          {% if block.type == 'review' %}
            <li class="rw-container-contant" {{ block.shopify_attributes }}>
              <div class="review-wrapper">
                <div class="main-review">
                  <div class="rw-text">
                    <div class="rw-detail">
                      <div style="display: grid;grid-gap: 14px;">
                        <div style="display: flex;align-items: center;justify-content: space-between;">
                          <div class="customer-info" style="display: flex; align-items: center; gap: 12px;">
                            {% if section.settings.show_customer_images %}
                              <div class="customer-avatar" style="
                                width: {{ section.settings.customer_image_size }}px;
                                height: {{ section.settings.customer_image_size }}px;
                                border-radius: {{ section.settings.customer_image_radius }}px;
                                overflow: hidden;
                                flex-shrink: 0;
                              ">
                                {% if block.settings.customer_image != blank %}

                                  {% comment %} Try to get the original image URL first {% endcomment %}
                                  {% assign original_image_url = block.settings.customer_image | img_url: 'medium' %}
                                  {% comment %} Debug: customer_image object = {{ block.settings.customer_image | json }} {% endcomment %}
                                  <img src="{{ original_image_url }}" 
                                       alt="{{ block.settings.name_text | append: ' avatar' }}" 
                                       loading="lazy" 
                                       onerror="console.log('Customer image failed to load:', this.src); this.style.display='none'; this.nextElementSibling.style.display='flex';"
                                       style="width: 100%; height: 100%; object-fit: cover;">
                                  
                                  {% comment %} Fallback initials if image fails to load {% endcomment %}
                                  {% assign name_parts = block.settings.name_text | split: ' ' %}
                                  {% assign initials = '' %}
                                  {% for part in name_parts %}
                                    {% assign initials = initials | append: part | slice: 0, 1 %}
                                  {% endfor %}
                                  <div class="customer-initials" style="
                                    width: 100%;
                                    height: 100%;
                                    background-color: {{ section.settings.customer_initials_bg }};
                                    color: {{ section.settings.customer_initials_color }};
                                    display: none;
                                    align-items: center;
                                    justify-content: center;
                                    font-weight: bold;
                                    font-size: {{ section.settings.customer_image_size | times: 0.4 }}px;
                                    text-transform: uppercase;
                                  ">
                                    {{ initials | slice: 0, 2 }}
                                  </div>
                                {% else %}
                                  {% comment %} Show initials when no image is provided {% endcomment %}
                                  {% assign name_parts = block.settings.name_text | split: ' ' %}
                                  {% assign initials = '' %}
                                  {% for part in name_parts %}
                                    {% assign initials = initials | append: part | slice: 0, 1 %}
                                  {% endfor %}
                                  <div class="customer-initials" style="
                                    width: 100%;
                                    height: 100%;
                                    background-color: {{ section.settings.customer_initials_bg }};
                                    color: {{ section.settings.customer_initials_color }};
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-weight: bold;
                                    font-size: {{ section.settings.customer_image_size | times: 0.4 }}px;
                                    text-transform: uppercase;
                                  ">
                                    {{ initials | slice: 0, 2 }}
                                  </div>
                                {% endif %}
                              </div>
                            {% endif %}
                            
                            <div class="customer-details" style="display: flex; align-items: center; gap: 8px;">
                              <span class="rw-text-name h2">
                                {{-
                                  block.settings.name_text
                                  | replace: '[[', '<span class="lumin-text__fancy1">'
                                  | replace: ']]', '</span>'
                                  | replace: '((', '<span class="lumin-text__fancy2">'
                                  | replace: '))', '</span>'
                                -}}
                              </span>
                              
                              {% if section.settings.show_country_flags and block.settings.show_country_flag and block.settings.country_code != blank %}
                                {% assign country_code = block.settings.country_code %}
                                {% comment %} Handle common country code mappings {% endcomment %}
                                {% if country_code == 'UK' or country_code == 'EN' or country_code == 'SC' or country_code == 'WA' or country_code == 'NI' %}
                                  {% assign flag_code = 'gb' %}
                                {% elsif country_code == 'USA' or country_code == 'America' %}
                                  {% assign flag_code = 'us' %}
                                {% elsif country_code == 'Canada' %}
                                  {% assign flag_code = 'ca' %}
                                {% elsif country_code == 'Australia' %}
                                  {% assign flag_code = 'au' %}
                                {% elsif country_code == 'Germany' %}
                                  {% assign flag_code = 'de' %}
                                {% elsif country_code == 'France' %}
                                  {% assign flag_code = 'fr' %}
                                {% elsif country_code == 'Spain' %}
                                  {% assign flag_code = 'es' %}
                                {% elsif country_code == 'Italy' %}
                                  {% assign flag_code = 'it' %}
                                {% elsif country_code == 'Netherlands' %}
                                  {% assign flag_code = 'nl' %}
                                {% elsif country_code == 'Belgium' %}
                                  {% assign flag_code = 'be' %}
                                {% elsif country_code == 'Switzerland' %}
                                  {% assign flag_code = 'ch' %}
                                {% elsif country_code == 'Austria' %}
                                  {% assign flag_code = 'at' %}
                                {% elsif country_code == 'Sweden' %}
                                  {% assign flag_code = 'se' %}
                                {% elsif country_code == 'Norway' %}
                                  {% assign flag_code = 'no' %}
                                {% elsif country_code == 'Denmark' %}
                                  {% assign flag_code = 'dk' %}
                                {% elsif country_code == 'Finland' %}
                                  {% assign flag_code = 'fi' %}
                                {% elsif country_code == 'Poland' %}
                                  {% assign flag_code = 'pl' %}
                                {% elsif country_code == 'Czech Republic' %}
                                  {% assign flag_code = 'cz' %}
                                {% elsif country_code == 'Slovakia' %}
                                  {% assign flag_code = 'sk' %}
                                {% elsif country_code == 'Hungary' %}
                                  {% assign flag_code = 'hu' %}
                                {% elsif country_code == 'Romania' %}
                                  {% assign flag_code = 'ro' %}
                                {% elsif country_code == 'Bulgaria' %}
                                  {% assign flag_code = 'bg' %}
                                {% elsif country_code == 'Greece' %}
                                  {% assign flag_code = 'gr' %}
                                {% elsif country_code == 'Portugal' %}
                                  {% assign flag_code = 'pt' %}
                                {% elsif country_code == 'Ireland' %}
                                  {% assign flag_code = 'ie' %}
                                {% elsif country_code == 'New Zealand' %}
                                  {% assign flag_code = 'nz' %}
                                {% elsif country_code == 'Japan' %}
                                  {% assign flag_code = 'jp' %}
                                {% elsif country_code == 'South Korea' %}
                                  {% assign flag_code = 'kr' %}
                                {% elsif country_code == 'China' %}
                                  {% assign flag_code = 'cn' %}
                                {% elsif country_code == 'India' %}
                                  {% assign flag_code = 'in' %}
                                {% elsif country_code == 'Brazil' %}
                                  {% assign flag_code = 'br' %}
                                {% elsif country_code == 'Mexico' %}
                                  {% assign flag_code = 'mx' %}
                                {% elsif country_code == 'Argentina' %}
                                  {% assign flag_code = 'ar' %}
                                {% elsif country_code == 'Chile' %}
                                  {% assign flag_code = 'cl' %}
                                {% elsif country_code == 'South Africa' %}
                                  {% assign flag_code = 'za' %}
                                {% else %}
                                  {% assign flag_code = country_code | downcase %}
                                {% endif %}
                                
                                <div class="country-flag" style="
                                  width: 24px;
                                  height: 16px;
                                  border-radius: 2px;
                                  overflow: hidden;
                                  flex-shrink: 0;
                                ">
                                  <img src="https://flagcdn.com/{{ flag_code }}.svg" 
                                       alt="{{ country_code | append: ' flag' }}" 
                                       loading="lazy"
                                       onerror="this.style.display='none'; this.parentElement.style.display='none';"
                                       style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                              {% endif %}
                            </div>
                          </div>
                          
                          <span class="rw-date">
                            {{-
                              block.settings.date_text
                              | replace: '[[', '<span class="lumin-text__fancy1">'
                              | replace: ']]', '</span>'
                              | replace: '((', '<span class="lumin-text__fancy2">'
                              | replace: '))', '</span>'
                            -}}
                          </span>
                        </div>

                        {% if section.settings.star_style == 'star' %}
                          {% render 'rating-star', block: block, section: section %}
                        {% elsif section.settings.star_style == 'star_bg' %}
                          {% render 'rating-star-background', block: block, section: section %}
                        {% elsif section.settings.star_style == 'star_bg_2' %}
                          {% render 'rating-star-crisp', block: block, section: section %}
                        {% endif %}
                        {% if section.settings.verify_text != blank %}
                          <div class="verify-container">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 14 14"
                              class="svg font-size-sm ml-1 text-tsw"
                              style="height: 1em;fill: {{section.settings.section_bg2}};"
                            >
                              <path d="M6.506.28a1.49 1.49 0 011.806.051l.107.096.808.793c.137.134.307.226.492.267l.141.021 1.118.081a1.49 1.49 0 011.353 1.214l.019.134.109 1.125c.018.2.095.39.22.545l.08.09.808.792c.474.475.57 1.202.249 1.779l-.075.121-.627.936a1.022 1.022 0 00-.177.532l.004.143.109 1.13a1.492 1.492 0 01-.949 1.54l-.136.045-1.088.3a1.018 1.018 0 00-.494.312l-.073.094-.633.932a1.49 1.49 0 01-1.715.57l-.133-.053-1.029-.468a1.019 1.019 0 00-.554-.082l-.14.028-1.094.317c-.65.18-1.332-.1-1.674-.667l-.068-.126-.486-1.027a1.019 1.019 0 00-.394-.433l-.106-.055-1.029-.468a1.494 1.494 0 01-.858-1.588l.029-.14.283-1.1A1.01 1.01 0 00.693 7.5l-.052-.133-.493-1.019A1.493 1.493 0 01.51 4.576l.113-.089.918-.65c.165-.117.291-.28.363-.467l.037-.115.287-1.097a1.49 1.49 0 011.418-1.121l.144.004 1.124.084c.19.015.38-.025.548-.112l.122-.075.922-.658zm3.756 5.105c.686-.682-.401-1.526-.947-.98l-.334.344-2.872 3.05-.57-.612-.327-.34-.359-.367-.123-.124a.687.687 0 10-.947.985l.45.46 1.078 1.133.798.851 3.29-3.502.796-.83.067-.068z"></path>
                            </svg>
                            <span class="verify">
                              {{-
                                section.settings.verify_text
                                | replace: '[[', '<span class="lumin-text__fancy1">'
                                | replace: ']]', '</span>'
                                | replace: '((', '<span class="lumin-text__fancy2">'
                                | replace: '))', '</span>'
                              -}}
                            </span>
                          </div>
                        {% endif %}
                      </div>
                      <div class="rw-detail-main" style="margin-top:24px;">
                        <div class="rw-text-head h4" style="margin-bottom:10px;">
                          {{
                            block.settings.review_head
                            | replace: '[[', '<span class="lumin-text__fancy1">'
                            | replace: ']]', '</span>'
                            | replace: '((', '<span class="lumin-text__fancy2">'
                            | replace: '))', '</span>'
                          }}
                        </div>
                        <div class="rw-text-main">
                          {{
                            block.settings.review_text
                            | replace: '[[', '<span class="lumin-text__fancy1">'
                            | replace: ']]', '</span>'
                            | replace: '((', '<span class="lumin-text__fancy2">'
                            | replace: '))', '</span>'
                          }}
                        </div>
                        {% assign review_image_width = section.settings.rw_img_size | times: 2 %}
                        {% if block.settings.img_block != blank %}
                          <img src="{{ block.settings.img_block | image_url: width: review_image_width }}" 
                               alt="{{ block.settings.img_block.alt | escape }}" 
                               loading="lazy" 
                               class="review-image"
                               style="max-width: {{section.settings.rw_img_size}}px ; height: auto; object-fit: contain;">
                        {% endif %}
                        {% if block.settings.img_block2 != blank %}
                          <img src="{{ block.settings.img_block2 | image_url: width: review_image_width }}" 
                               alt="{{ block.settings.img_block2.alt | escape }}" 
                               loading="lazy" 
                               class="review-image"
                               style="max-width: {{section.settings.rw_img_size}}px; height: auto; object-fit: contain;">
                        {% endif %}

                        {% if section.settings.show_footer %}
                          <div class="rw-text-footer">
                            {% if section.settings.show_product %}
                              <span style="display: flex;align-items: center;gap: 10px;">
                                {% assign display_product = product %}
                                {% assign display_variant = product.selected_or_first_available_variant %}
                                
                                {% if block.settings.selected_product != blank %}
                                  {% assign display_product = block.settings.selected_product %}
                                {% endif %}
                                
                                {% if display_product.images.size > 0 %}
                                  <div
                                    style="
                                      background-image: url('{{ display_product.images[0] | img_url: 'medium' }}');
                                      background-size: cover;
                                      background-position: center;
                                      width: 50px;
                                      min-width: 50px;
                                      height: 50px;
                                      display:block;
                                      border-radius: {{ section.settings.product_image_radius }}px;
                                    "
                                    role="img"
                                    aria-label="{{ display_product.title }}"
                                  ></div>
                                {% endif %}
                                <span class="lm-text-clip">{{ display_product.title | escape }}</span>
                              </span>
                            {% endif %}
                            {% if section.settings.like_text != blank %}
                              <span
                                {% unless section.settings.show_product %}
                                  style="display: flex;justify-content: space-between;width: 100%;"
                                {% endunless %}
                              >
                                <span>
                                  {{-
                                    section.settings.like_text
                                    | replace: '[[', '<span class="lumin-text__fancy1">'
                                    | replace: ']]', '</span>'
                                    | replace: '((', '<span class="lumin-text__fancy2">'
                                    | replace: '))', '</span>'
                                  -}}
                                </span>
                                <span>
                                  <svg
                                    enable-background="new 0 0 949.3 949.3"
                                    style="height:auto;margin:0 2px 0 10px;width:14px"
                                    version="1.1"
                                    viewBox="0 0 949.3 949.3"
                                    xml:space="preserve"
                                    xmlns="http://www.w3.org/2000/svg"
                                  >
                                    <path d="m899.3 338.1-355.3-0.4s20.6-84.3 24.3-123.8c2.5-27 3.101-53.9-3.1-80.5-9.2-40-19.5-65-35.9-96-8.8-16.4-25.8-26.6-44.3-26.6h-68.8c-27.7 0-50.101 22.5-50 50.2 0.2 46.3 0.2 108.1-0.8 110.2-27 56.8-58.3 111.3-93.6 163.3-16.1 23.8-33 46.9-52.6 68-8.6 9.2-13.3 21.4-13.3 33.9v437.2c0 12.898 5 25.398 14 34.699 13.4 13.801 37.4 30.199 76.8 30.199 124.3-0.5 325.7-1.6 468.9-0.6 17.9 0.1 34.5-9.299 43.5-24.799l126.3-216.2c8.6-15 13.1-32 13.199-49.299l0.7-259.3c1e-3 -27.7-22.399-50.1-49.999-50.2z"/><path d="m94.8 409.5h-44.8c-27.6 0-50 22.4-50 50v429c0 27.602 22.4 50 50 50h44.7c27.6 0 50-22.398 50-50v-429c0.1-27.6-22.3-50-49.9-50z"/>
                                  </svg>
                                  {{ block.settings.like_size }}
                                  <svg
                                    enable-background="new 0 0 512 512"
                                    style="height:auto;margin:0 2px 0 10px;width:14px"
                                    version="1.1"
                                    viewBox="0 0 512 512"
                                    xml:space="preserve"
                                    xmlns="http://www.w3.org/2000/svg"
                                  >
                                    <path d="m495.97 297.23-24.695 14.225c-9.711 5.598-20.727 8.543-31.945 8.543h-71.329c-8.836 0-16 7.164-16 16v132.16c0 15.375-12.469 27.84-27.844 27.84h-0.094c-11.977 0-22.617-7.668-26.406-19.035l-30.719-80.355c-7.117-18.611-19.844-34.547-36.422-45.598l-70.515-47.012v-240h14.273c11.602 0 22.977-3.152 32.93-9.121l49.594-29.758c9.953-5.969 21.328-9.121 32.93-9.121h136.94c13.852 0 27.32 4.492 38.398 12.801l34.141 25.6c8.054 6.042 12.796 15.527 12.796 25.599v189.5c0 11.443-6.109 22.016-16.031 27.728z"/><path d="m128 304v-240c0-17.672-14.328-32-32-32h-96v304h96c17.672 0 32-14.326 32-32zm-32-208c0 17.672-14.328 32-32 32s-32-14.328-32-32 14.328-32 32-32 32 14.328 32 32z"/>
                                  </svg>
                                  {{ block.settings.dislike_size }}
                                </span>
                              </span>
                            {% endif %}
                          </div>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
                {% if section.settings.show_border %}
                  <lr></lr>
                {% endif %}
              </div>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
      <div style="text-align:center;margin-top:20px;">
        <a id="loadMore" class="link-review button">
          {{-
            section.settings.load_text
            | replace: '[[', '<span class="lumin-text__fancy1">'
            | replace: ']]', '</span>'
            | replace: '((', '<span class="lumin-text__fancy2">'
            | replace: '))', '</span>'
          -}}
        </a>
      </div>
    </div>
  </div>
</div>

{% comment %} Review Popup Modal {% endcomment %}
{% if section.settings.enable_review_popup %}
<div id="reviewPopupModal" class="review-popup-modal">
  <div class="review-popup-content">
    <button class="review-popup-close" aria-label="Close review popup">&times;</button>
    
    <div class="review-popup-header">
      <div class="review-popup-customer">
        <div class="review-popup-avatar">
          <div id="popupCustomerAvatar" class="popup-customer-avatar" style="
            width: {{ section.settings.popup_customer_image_size }}px;
            height: {{ section.settings.popup_customer_image_size }}px;
            border-radius: {{ section.settings.popup_customer_image_size | divided_by: 2 }}px;
            overflow: hidden;
            flex-shrink: 0;
          ">
            <img id="popupCustomerImage" src="" alt="Customer" loading="lazy" style="width: 100%; height: 100%; object-fit: cover; image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;">
            <div id="popupCustomerInitials" class="popup-customer-initials" style="
              width: 100%;
              height: 100%;
              background-color: {{ section.settings.customer_initials_bg }};
              color: {{ section.settings.customer_initials_color }};
              display: none;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              font-size: {{ section.settings.customer_image_size | times: 0.4 }}px;
              text-transform: uppercase;
            "></div>
          </div>
        </div>
        <div class="review-popup-customer-info">
          <div class="popup-customer-name-flag" style="display: flex; align-items: center; gap: 8px;">
            <h3 id="popupCustomerName"></h3>
            <div id="popupCountryFlag" class="popup-country-flag" style="
              width: 24px;
              height: 16px;
              border-radius: 2px;
              overflow: hidden;
              flex-shrink: 0;
              display: none;
            ">
              <img id="popupFlagImage" src="" alt="Country flag" loading="lazy" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
          </div>
          <p class="review-popup-date" id="popupReviewDate"></p>
          <div class="review-popup-rating">
            <div class="review-popup-stars" id="popupReviewStars"></div>
            <span class="review-popup-rating-text" id="popupRatingText"></span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="review-popup-body">
      <h2 class="review-popup-title" id="popupReviewTitle"></h2>
      <p class="review-popup-text" id="popupReviewText"></p>
      
      <div class="review-popup-images" id="popupReviewImages"></div>
    </div>
    
    <div class="review-popup-footer">
      {% if section.settings.show_popup_product_info %}
      <div class="review-popup-product" id="popupProductInfo">
        <div class="review-popup-product-image">
          <img id="popupProductImage" src="" alt="Product" loading="lazy" width="50" height="50">
        </div>
        <div class="review-popup-product-title" id="popupProductTitle"></div>
      </div>
      {% endif %}
      
      {% if section.settings.show_popup_helpful_buttons %}
      <div class="review-popup-helpful">
        <span class="review-popup-helpful-text">{{ section.settings.popup_helpful_text | default: 'Was this helpful?' }}</span>
        <div class="review-popup-helpful-buttons">
          <button class="helpful-btn" data-action="like" aria-label="Mark as helpful">
            <svg viewBox="0 0 24 24">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
            <span id="likeCount">0</span>
          </button>
          <button class="helpful-btn" data-action="dislike" aria-label="Mark as not helpful">
            <svg viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <span id="dislikeCount">0</span>
          </button>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endif %}

{% comment %} Add Review Modal {% endcomment %}
{% if section.settings.show_add_review_button %}
  <div id="addReviewModal" class="review-modal" style="
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    backdrop-filter: blur(5px);
  ">
    <div class="modal-content" style="
      background-color: #fff;
      margin: 5% auto;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-height: 90%;
      overflow: auto;
      max-width: 500px; 
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    ">
      <span class="close-modal" style="
        position: absolute;
        right: 20px;
        top: 20px;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        color: #666;
        transition: color 0.3s ease;
      ">&times;</span>
      
      <h2 style="margin: 0 0 25px 0; text-align: center; color: #333;">{{ section.settings.modal_title | default: 'Write Your Review' }}</h2>
      
      <form id="reviewForm" class="review-form" action="/contact" method="post" novalidate>
        <input type="hidden" name="form_type" value="contact">
        <input type="hidden" name="utf8" value="‚úì">
        <input type="hidden" name="contact[tags]" value="Review Submission">
        <input type="hidden" name="contact[note]" value="Product: {{ product.title | default: 'General Review' }}">
        <input type="hidden" name="contact[rating]" id="hiddenRating" value="">
        
        <div class="form-group" style="margin-bottom: 20px;">
          <label for="reviewerName" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">{{ section.settings.name_label | default: 'Your Name' }}</label>
          <input type="text" id="reviewerName" name="contact[name]" required style="
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
          ">
        </div>
        
        <div class="form-group" style="margin-bottom: 20px;">
          <label for="rating-group" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">{{ section.settings.rating_label | default: 'Rating' }}</label>
          <div class="star-rating-input" id="rating-group" role="group" aria-labelledby="rating-group" style="display: flex; gap: 8px; justify-content: center; align-items: center;">
            {% for i in (1..5) %}
              <input type="radio" id="star{{ i }}" name="rating" value="{{ i }}" required style="display: none;">
              <label for="star{{ i }}" class="star-label" style="
                cursor: pointer;
                font-size: 32px;
                color: #ddd;
                transition: color 0.3s ease;
              " title="{{ i }} star{% if i != 1 %}s{% endif %}" aria-label="{{ i }} star{% if i != 1 %}s{% endif %}">&#9733;</label>
            {% endfor %}
            <div class="rating-display" style="margin-left: 15px; font-size: 14px; color: #666; min-width: 80px;">
              <span class="rating-text">Select rating</span>
            </div>
          </div>
        </div>
        
        <div class="form-group" style="margin-bottom: 20px;">
          <label for="reviewTitle" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">{{ section.settings.title_label | default: 'Review Title' }}</label>
          <input type="text" id="reviewTitle" name="contact[subject]" required style="
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
          ">
        </div>
        
        <div class="form-group" style="margin-bottom: 25px;">
          <label for="reviewText" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">{{ section.settings.review_label | default: 'Your Review' }}</label>
          <textarea id="reviewText" name="contact[body]" rows="4" required style="
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
            resize: vertical;
            font-family: inherit;
          "></textarea>
        </div>
        
        <div class="form-group" style="margin-bottom: 20px;">
          <label for="reviewerEmail" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">{{ section.settings.email_label | default: 'Your Email' }}</label>
          <input type="email" id="reviewerEmail" name="contact[email]" value="{{ customer.email | default: '' }}" required style="
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
          ">
        </div>
        
        <div class="form-actions" style="display: flex; gap: 15px; justify-content: center;">
          <button type="button" class="cancel-btn" style="
            background: #f5f5f5;
            color: #666;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
          ">{{ section.settings.cancel_button_text | default: 'Cancel' }}</button>
          <button type="submit" class="submit-btn" style="
            background: {{ section.settings.add_review_button_bg | default: '#000' }};
            color: {{ section.settings.add_review_button_text_color | default: '#fff' }};
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
          ">{{ section.settings.submit_button_text | default: 'Submit Review' }}</button>
        </div>
      </form>
    </div>
  </div>
{% endif %}


<script>
   document.addEventListener("DOMContentLoaded", function() {
      const products = document.querySelectorAll(".rw-container-contant");
      const loadMoreBtn = document.getElementById("loadMore");
      let visibleProductsCount = 0;
      const productsPerPage = {{ section.settings.review_load }};
      
      // Review Popup Modal Functionality
      {% if section.settings.enable_review_popup %}
      const reviewPopupModal = document.getElementById('reviewPopupModal');
      const popupCloseBtn = document.querySelector('.review-popup-close');
      const helpfulBtns = document.querySelectorAll('.helpful-btn');
      
      // Function to generate star rating HTML
      function generateStars(rating) {
        let starsHTML = '';
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 !== 0;
        
        for (let i = 0; i < fullStars; i++) {
          starsHTML += '<svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';
        }
        
        if (hasHalfStar) {
          starsHTML += '<svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" style="fill: url(#half-star)"/><defs><linearGradient id="half-star" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="50%" style="stop-color:{{ section.settings.feature_svg_color }};stop-opacity:1" /><stop offset="50%" style="stop-color:{{ section.settings.inactive_star_color }};stop-opacity:1" /></linearGradient></defs></svg>';
        }
        
        const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
        for (let i = 0; i < emptyStars; i++) {
          starsHTML += '<svg viewBox="0 0 24 24" style="fill:{{ section.settings.inactive_star_color }}"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';
        }
        
        return starsHTML;
      }
      
      // Helper function to get correct country code for flags
      function getCountryCodeForFlag(countryCode) {
        const countryCodeMap = {
          'UK': 'GB',  // United Kingdom
          'EN': 'GB',  // England
          'SC': 'GB',  // Scotland
          'WA': 'GB',  // Wales
          'NI': 'GB',  // Northern Ireland
          'USA': 'US', // United States
          'America': 'US',
          'Canada': 'CA',
          'Australia': 'AU',
          'Germany': 'DE',
          'France': 'FR',
          'Spain': 'ES',
          'Italy': 'IT',
          'Netherlands': 'NL',
          'Belgium': 'BE',
          'Switzerland': 'CH',
          'Austria': 'AT',
          'Sweden': 'SE',
          'Norway': 'NO',
          'Denmark': 'DK',
          'Finland': 'FI',
          'Poland': 'PL',
          'Czech Republic': 'CZ',
          'Slovakia': 'SK',
          'Hungary': 'HU',
          'Romania': 'RO',
          'Bulgaria': 'BG',
          'Greece': 'GR',
          'Portugal': 'PT',
          'Ireland': 'IE',
          'New Zealand': 'NZ',
          'Japan': 'JP',
          'South Korea': 'KR',
          'China': 'CN',
          'India': 'IN',
          'Brazil': 'BR',
          'Mexico': 'MX',
          'Argentina': 'AR',
          'Chile': 'CL',
          'South Africa': 'ZA'
        };
        
        // First check if it's a full country name
        if (countryCodeMap[countryCode]) {
          return countryCodeMap[countryCode];
        }
        
        // Then check if it's already a valid 2-letter code
        const validCode = countryCode.toUpperCase();
        if (validCode.length === 2 && /^[A-Z]{2}$/.test(validCode)) {
          return validCode;
        }
        
        // Return null if no valid code found
        return null;
      }
      
      // Function to handle flag loading errors
      function handleFlagError(img) {
        img.classList.add('error');
        img.style.display = 'none';
        // Optionally show a fallback icon or text
        const flagContainer = img.parentElement;
        if (flagContainer) {
          flagContainer.style.display = 'none';
        }
      }
      
      // Function to open review popup
      function openReviewPopup(reviewData) {
        // Populate popup content
        document.getElementById('popupCustomerName').textContent = reviewData.name;
        document.getElementById('popupReviewDate').textContent = reviewData.date;
        document.getElementById('popupReviewTitle').textContent = reviewData.title;
        document.getElementById('popupReviewText').textContent = reviewData.text;
        document.getElementById('popupRatingText').textContent = `${reviewData.rating} star${reviewData.rating > 1 ? 's' : ''}`;
        
        // Set customer image/initials
        const customerImage = document.getElementById('popupCustomerImage');
        const customerInitials = document.getElementById('popupCustomerInitials');
        
        if (reviewData.customerImage) {
          console.log('Setting customer image in popup:', reviewData.customerImage);
          customerImage.src = reviewData.customerImage;
          customerImage.alt = `${reviewData.name} avatar`;
          customerImage.style.display = 'block';
          customerInitials.style.display = 'none';
        } else {
          // Show initials instead
          customerImage.style.display = 'none';
          customerInitials.style.display = 'flex';
          
          // Generate initials from name
          const nameParts = reviewData.name.split(' ');
          let initials = '';
          for (let part of nameParts) {
            if (part.length > 0) {
              initials += part.charAt(0);
            }
          }
          customerInitials.textContent = initials.slice(0, 2).toUpperCase();
          
          // Update initials font size based on popup customer image size
          const popupCustomerImageSize = {{ section.settings.popup_customer_image_size | default: 60 }};
          customerInitials.style.fontSize = `${popupCustomerImageSize * 0.4}px`;
        }
        
        // Set country flag
        const countryFlag = document.getElementById('popupCountryFlag');
        const flagImage = document.getElementById('popupFlagImage');
        
                  if (reviewData.countryCode && {{ section.settings.show_country_flags | json }}) {
            const validCountryCode = getCountryCodeForFlag(reviewData.countryCode);
            if (validCountryCode) {
              flagImage.src = `https://flagcdn.com/${validCountryCode.toLowerCase()}.svg`;
              flagImage.alt = `${validCountryCode} flag`;
              countryFlag.style.display = 'flex';
              
              // Add error handling for flag loading
              flagImage.onerror = function() {
                handleFlagError(this);
              };
            } else {
              countryFlag.style.display = 'none';
            }
          } else {
            countryFlag.style.display = 'none';
          }
        
        // Generate and set star rating
        document.getElementById('popupReviewStars').innerHTML = generateStars(reviewData.rating);
        
        // Handle review images
        const imagesContainer = document.getElementById('popupReviewImages');
        if (reviewData.images && reviewData.images.length > 0) {
          let imagesHTML = '';
          const imageQuality = {{ section.settings.popup_image_quality | default: 800 }};
          
          reviewData.images.forEach((imageSrc, index) => {
            imagesHTML += `
              <div class="review-popup-image">
                <img src="${imageSrc}" 
                     alt="Review image ${index + 1}" 
                     loading="lazy" 
                     onload="this.style.opacity='1'; this.parentElement.classList.add('loaded')"
                     onerror="this.style.opacity='0.5'; this.style.filter='grayscale(100%)'; this.parentElement.classList.add('loaded')"
                     style="opacity: 0; transition: opacity 0.3s ease; max-width: 100%; height: auto; object-fit: contain;">
              </div>
            `;
          });
          imagesContainer.innerHTML = imagesHTML;
          imagesContainer.style.display = 'grid';
          
          // Add click to enlarge functionality for images
          {% if section.settings.enable_image_enlarge %}
          const popupImages = imagesContainer.querySelectorAll('.review-popup-image img');
          popupImages.forEach(img => {
            img.addEventListener('click', function() {
              openImageEnlarged(this.src, this.alt);
            });
            img.style.cursor = 'pointer';
            img.title = 'Click to enlarge';
          });
          {% endif %}
        } else {
          imagesContainer.style.display = 'none';
        }
        
        // Handle product information
        {% if section.settings.show_popup_product_info %}
        const productInfo = document.getElementById('popupProductInfo');
        if (reviewData.product) {
          document.getElementById('popupProductTitle').textContent = reviewData.product.title;
          if (reviewData.product.image) {
            document.getElementById('popupProductImage').src = reviewData.product.image;
            document.getElementById('popupProductImage').alt = reviewData.product.title;
          }
          productInfo.style.display = 'flex';
        } else {
          productInfo.style.display = 'none';
        }
        {% endif %}
        
        // Show popup with animation
        reviewPopupModal.style.display = 'block';
        document.body.style.overflow = 'hidden';
        
        // Trigger animation
        setTimeout(() => {
          reviewPopupModal.classList.add('show');
        }, 10);
      }
      
      // Function to close review popup
      function closeReviewPopup() {
        reviewPopupModal.classList.remove('show');
        setTimeout(() => {
          reviewPopupModal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }, 300);
      }
      
      // Function to open image in enlarged view
      function openImageEnlarged(imageSrc, imageAlt) {
        // Create enlarged image modal
        const enlargedModal = document.createElement('div');
        enlargedModal.className = 'image-enlarged-modal';
        enlargedModal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.9);
          z-index: 20000;
          display: flex;
          align-items: center;
          justify-content: center;
          opacity: 0;
          transition: opacity 0.3s ease;
          overflow: auto;
        `;
        
        // Create image container
        const imageContainer = document.createElement('div');
        imageContainer.style.cssText = `
          position: relative;
          max-width: 90vw;
          max-height: 90vh;
          text-align: center;
        `;
        
        // Create image element
        const enlargedImg = document.createElement('img');
        enlargedImg.src = imageSrc;
        enlargedImg.alt = imageAlt;
        enlargedImg.style.cssText = `
          max-width: 100%;
          max-height: 100%;
          width: auto;
          height: auto;
          object-fit: contain;
          border-radius: 8px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        `;
        
        // Create close button
        const closeBtn = document.createElement('button');
        closeBtn.innerHTML = '&times;';
        closeBtn.style.cssText = `
          position: absolute;
          top: -40px;
          right: 0;
          background: rgba(255,255,255,0.9);
          border: none;
          border-radius: 50%;
          width: 40px;
          height: 40px;
          font-size: 24px;
          cursor: pointer;
          color: #333;
          transition: all 0.3s ease;
        `;
        
        closeBtn.addEventListener('click', () => {
          enlargedModal.style.opacity = '0';
          setTimeout(() => {
            document.body.removeChild(enlargedModal);
          }, 300);
        });
        
        // Close on background click
        enlargedModal.addEventListener('click', (e) => {
          if (e.target === enlargedModal) {
            closeBtn.click();
          }
        });
        
        // Close on escape key
        document.addEventListener('keydown', function closeOnEscape(e) {
          if (e.key === 'Escape') {
            closeBtn.click();
            document.removeEventListener('keydown', closeOnEscape);
          }
        });
        
        // Assemble and show
        imageContainer.appendChild(closeBtn);
        imageContainer.appendChild(enlargedImg);
        enlargedModal.appendChild(imageContainer);
        document.body.appendChild(enlargedModal);
        
        // Trigger animation
        setTimeout(() => {
          enlargedModal.style.opacity = '1';
        }, 10);
      }
      
      // Close popup when clicking close button
      popupCloseBtn.addEventListener('click', closeReviewPopup);
      
      // Close popup when clicking outside
      reviewPopupModal.addEventListener('click', function(event) {
        if (event.target === reviewPopupModal) {
          closeReviewPopup();
        }
      });
      
      // Close popup with Escape key
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && reviewPopupModal.style.display === 'block') {
          closeReviewPopup();
        }
      });
      
      // Handle helpful buttons
      {% if section.settings.show_popup_helpful_buttons %}
      helpfulBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const action = this.getAttribute('data-action');
          const countElement = this.querySelector('span');
          let currentCount = parseInt(countElement.textContent);
          
          // Remove active class from all buttons
          helpfulBtns.forEach(b => b.classList.remove('active'));
          
          // Add active class to clicked button
          this.classList.add('active');
          
          // Increment count
          countElement.textContent = currentCount + 1;
          
          // Store the action in localStorage for persistence
          const reviewId = reviewPopupModal.getAttribute('data-review-id');
          if (reviewId) {
            localStorage.setItem(`review-${reviewId}-${action}`, currentCount + 1);
          }
        });
      });
      {% endif %}
      {% endif %}
      
      // Add click event to review blocks only if popup is enabled
      {% if section.settings.enable_review_popup %}
      products.forEach((reviewBlock, index) => {
        reviewBlock.addEventListener('click', function() {
          // Get review data from the block
          const nameElement = this.querySelector('.rw-text-name');
          const dateElement = this.querySelector('.rw-date');
          const titleElement = this.querySelector('.rw-text-head');
          const textElement = this.querySelector('.rw-text-main');
          // Only get actual review images, not customer avatar images
          const imageElements = this.querySelectorAll('.main-review .review-image');
          const productElement = this.querySelector('.rw-text-footer .review-popup-product-image');
          
          // Extract review data
          const reviewData = {
            name: nameElement ? nameElement.textContent.trim() : 'Anonymous',
            date: dateElement ? dateElement.textContent.trim() : 'Unknown date',
            title: titleElement ? titleElement.textContent.trim() : 'Review',
            text: textElement ? textElement.textContent.trim() : 'No review text available',
            rating: 5, // Default rating, you can extract this from the stars if needed
            images: [],
            product: null,
            customerImage: null,
            countryCode: null
          };
          
          // Extract customer image or initials
          const customerAvatar = this.querySelector('.customer-avatar img');
          if (customerAvatar && customerAvatar.src) {
            reviewData.customerImage = customerAvatar.src;
            console.log('Customer avatar found:', customerAvatar.src);
          } else {
            console.log('No customer avatar found or no src');
          }
          
          // Extract country code from flag image src
          const countryFlag = this.querySelector('.country-flag img');
          if (countryFlag && countryFlag.src) {
            const flagMatch = countryFlag.src.match(/flagcdn\.com\/([a-z]{2})\.svg/);
            if (flagMatch) {
              reviewData.countryCode = flagMatch[1].toUpperCase();
            }
          }
          
                  // Extract images with high quality
        if (imageElements.length > 0) {
          imageElements.forEach(img => {
            if (img.src && img.src !== '') {
              // Request high quality images for popup
              let highQualitySrc = img.src;
              
              // If it's a Shopify CDN image, request higher quality while preserving aspect ratio
              if (highQualitySrc.includes('cdn.shopify.com')) {
                // Remove existing size parameters and request high quality
                highQualitySrc = highQualitySrc.replace(/[?&](width|height|crop|scale)=\d+/g, '');
                
                // Add high quality parameters based on section setting, preserving aspect ratio
                const imageQuality = {{ section.settings.popup_image_quality | default: 800 }};
                if (highQualitySrc.includes('?')) {
                  highQualitySrc += `&width=${imageQuality}&scale=2`;
                } else {
                  highQualitySrc += `?width=${imageQuality}&scale=2`;
                }
              }
              
              reviewData.images.push(highQualitySrc);
            }
          });
        }
          
          // Extract product information
          if (productElement) {
            const productTitle = this.querySelector('.lm-text-clip');
            reviewData.product = {
              title: productTitle ? productTitle.textContent.trim() : 'Product',
              image: productElement.style.backgroundImage ? productElement.style.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i, '$1') : ''
            };
          }
          
          // Set review ID for helpful buttons
          reviewPopupModal.setAttribute('data-review-id', `review-${index}`);
          
          // Open popup with review data
          openReviewPopup(reviewData);
        });
        
        // Add keyboard support for accessibility
        reviewBlock.addEventListener('keydown', function(event) {
          if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            this.click();
          }
        });
        
        // Make review blocks focusable
        reviewBlock.setAttribute('tabindex', '0');
        reviewBlock.setAttribute('role', 'button');
        reviewBlock.setAttribute('aria-label', `View review by ${reviewBlock.querySelector('.rw-text-name')?.textContent.trim() || 'customer'}`);
      });
      {% else %}
      // If popup is disabled, remove pointer cursor and hover effects
      products.forEach((reviewBlock) => {
        reviewBlock.style.cursor = 'default';
        reviewBlock.style.pointerEvents = 'none';
      });
      {% endif %}

      // Function to show products
      function showProducts() {
          for (let i = visibleProductsCount; i < visibleProductsCount + productsPerPage; i++) {
              if (products[i]) {
                  products[i].style.display = "block";
              }
          }
          visibleProductsCount += productsPerPage;

          // Hide the button if all products are visible
          if (visibleProductsCount >= products.length) {
              loadMoreBtn.style.display = "none";
          }
      }

      // Initial load
      showProducts();

      // Load more products on button click
      loadMoreBtn.addEventListener("click", function() {
          showProducts();
      });

      // Listen for design mode changes
      if (typeof Shopify.designMode !== 'undefined' && Shopify.designMode) {
          document.addEventListener('shopify:section:load', function(event) {
              // Reload the script or reinitialize the functionality
              visibleProductsCount = 0;
              Array.prototype.forEach.call(products, function(product) {
                  product.style.display = 'none';
              });
              loadMoreBtn.style.display = 'flex';
              showProducts();
          });
      }
      
      {% if section.settings.show_add_review_button %}
      // Add Review Modal Functionality
      const modal = document.getElementById('addReviewModal');
      const addReviewBtn = document.getElementById('addReviewBtn');
      const closeModal = document.querySelector('.close-modal');
      const cancelBtn = document.querySelector('.cancel-btn');
      const reviewForm = document.getElementById('reviewForm');
      const starLabels = document.querySelectorAll('.star-label');
      const starInputs = document.querySelectorAll('input[name="rating"]');
      
      // Debug: Log email settings on page load
      console.log('Review System Debug Info:');
              console.log('Email Method:', '{{ section.settings.email_method | default: "real_form" }}');
      
      console.log('Email Subject:', '{{ section.settings.email_subject | default: "New Review Submitted" }}');
      
      console.log('Show Add Review Button:', '{{ section.settings.show_add_review_button }}');
      
      // Test email functionality (for debugging)
      window.testReviewEmail = function() {
          console.log('Testing email functionality...');
          const testData = {
              name: 'Test User',
              rating: '5',
              title: 'Test Review',
              text: 'This is a test review to verify email functionality.',
              date: new Date().toLocaleDateString('en-US', { 
                  year: 'numeric', 
                  month: 'long' 
              })
          };
          sendReviewEmail(testData);
      };
      

      
      // Open modal
      addReviewBtn.addEventListener('click', function() {
          modal.style.display = 'block';
          document.body.style.overflow = 'hidden';
      });
      
      // Close modal functions
      function closeModalFunc() {
          modal.style.display = 'none';
          document.body.style.overflow = 'auto';
          reviewForm.reset();
          resetStars();
      }
      
      closeModal.addEventListener('click', closeModalFunc);
      cancelBtn.addEventListener('click', closeModalFunc);
      
      // Close modal when clicking outside
      window.addEventListener('click', function(event) {
          if (event.target === modal) {
              closeModalFunc();
          }
      });
      
      // Star rating functionality
      const ratingText = document.querySelector('.rating-text');
      
      function resetStars() {
          starLabels.forEach((label, index) => {
              label.style.color = '#ddd';
          });
          if (ratingText) {
              ratingText.textContent = 'Select rating';
          }
      }
      
      function updateRatingDisplay(rating) {
          if (ratingText) {
              ratingText.textContent = `${rating} star${rating > 1 ? 's' : ''}`;
              ratingText.parentElement.classList.add('updated');
              // Remove the class after animation
              setTimeout(() => {
                  ratingText.parentElement.classList.remove('updated');
              }, 1000);
          }
      }
      
      starLabels.forEach((label, index) => {
          label.addEventListener('mouseenter', function() {
              // Fill stars up to current hover
              for (let i = 0; i <= index; i++) {
                  starLabels[i].style.color = '#ffd700';
              }
              // Reset remaining stars
              for (let i = index + 1; i < starLabels.length; i++) {
                  starLabels[i].style.color = '#ddd';
              }
              // Update rating display
              updateRatingDisplay(index + 1);
          });
          
          label.addEventListener('mouseleave', function() {
              // Reset to selected rating on mouse leave
              const selectedRating = document.querySelector('input[name="rating"]:checked');
              if (selectedRating) {
                  const selectedIndex = parseInt(selectedRating.value) - 1;
                  for (let i = 0; i <= selectedIndex; i++) {
                      starLabels[i].style.color = '#ffd700';
              }
                  for (let i = selectedIndex + 1; i < starLabels.length; i++) {
                      starLabels[i].style.color = '#ddd';
                  }
                  updateRatingDisplay(selectedIndex + 1);
              } else {
                  resetStars();
              }
          });
          
          label.addEventListener('click', function() {
              // Set the radio button value
              starInputs[index].checked = true;
              // Fill stars up to selected
              for (let i = 0; i <= index; i++) {
                  starLabels[i].style.color = '#ffd700';
              }
              // Reset remaining stars
              for (let i = index + 1; i < starLabels.length; i++) {
                  starLabels[i].style.color = '#ddd';
              }
              // Update rating display
              updateRatingDisplay(index + 1);
              // Update hidden rating field
              document.getElementById('hiddenRating').value = index + 1;
          });
      });
      
      // Handle form submission
      reviewForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Validate form
          const formData = new FormData(reviewForm);
          const name = formData.get('contact[name]');
          const rating = formData.get('rating');
          const title = formData.get('contact[subject]');
          const text = formData.get('contact[body]');
          const email = formData.get('contact[email]');
          
          // Check if all fields are filled
          if (!name || !rating || !title || !text || !email) {
              alert('Please fill in all required fields and select a rating.');
              return;
          }
          
          // Check if rating is selected
          if (!rating) {
              alert('Please select a rating.');
              return;
          }
          
          // Validate email format
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(email)) {
              alert('Please enter a valid email address.');
              return;
          }
          
          // Get date format setting
          const dateFormat = '{{ section.settings.date_format | default: "detailed" }}';
          
          // Format date based on setting
          let formattedDate;
          const now = new Date();
          
          if (dateFormat === 'detailed') {
              formattedDate = now.toLocaleDateString('en-US', { 
                  year: 'numeric', 
                  month: 'long',
                  day: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit'
              });
          } else if (dateFormat === 'simple') {
              formattedDate = now.toLocaleDateString('en-US', { 
                  year: 'numeric', 
                  month: 'long',
                  day: 'numeric'
              });
          } else if (dateFormat === 'short') {
              formattedDate = now.toLocaleDateString('en-US', { 
                  year: 'numeric', 
                  month: '2-digit',
                  day: '2-digit'
              });
          } else {
              formattedDate = now.toLocaleDateString('en-US', { 
                  year: 'numeric', 
                  month: 'long',
                  day: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit'
              });
          }
          
          const reviewData = {
              name: name,
              rating: rating,
              title: title,
              text: text,
              email: email,
              date: formattedDate
          };
          
          console.log('üìù Form validation passed, preparing Shopify contact form submission:', reviewData);
          
          // Prepare the review content for Shopify contact form
          const reviewContent = `REVIEW SUBMITTED ON: ${reviewData.date}

NEW REVIEW SUBMISSION

Review Details:
‚Ä¢ Customer Name: ${name}
‚Ä¢ Customer Email: ${email}
‚Ä¢ Rating: ${'‚≠ê'.repeat(rating)} (${rating}/5 stars)
‚Ä¢ Review Title: ${title}
‚Ä¢ Review Text: ${text}

Store Information:
‚Ä¢ Product: {{ product.title | default: 'General Review' }}
‚Ä¢ Store: {{ shop.name }}
‚Ä¢ Submitted via: Website Review Form

Submission Date: ${reviewData.date}
Time Submitted: ${now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}

---
This review was submitted through the review form on your website.
Please review and take appropriate action.`;
          
          // Update the form fields with the formatted content
          document.querySelector('input[name="contact[name]"]').value = name;
          document.querySelector('input[name="contact[subject]"]').value = `Review: ${title} - ${rating} stars - ${reviewData.date}`;
          document.querySelector('textarea[name="contact[body]"]').value = reviewContent;
          document.querySelector('input[name="contact[email]"]').value = email;
          document.getElementById('hiddenRating').value = rating;
          
          // Show success message before form submission
          const successTitle = '{{ section.settings.success_message_title | default: "Thank you for your review!" }}';
          const successBody = '{{ section.settings.success_message_body | default: "Your review has been submitted successfully and will be forwarded to our team." }}';
          const successDuration = parseInt('{{ section.settings.success_message_duration | default: "3" }}') * 1000;
          
          showSuccessMessage(`${successTitle} ${successBody}`, successDuration);
          
          // Add loading state to form
          reviewForm.classList.add('form-submitting');
          const submitBtn = reviewForm.querySelector('.submit-btn');
          const originalText = submitBtn.textContent;
          submitBtn.disabled = true;
          submitBtn.textContent = 'Submitting...';
          
          // Submit the form to Shopify contact form
          setTimeout(() => {
              reviewForm.submit();
          }, 1500);
      });
      
      // Function to send review via email
      function sendReviewEmail(reviewData) {
          const emailMethod = '{{ section.settings.email_method | default: "real_form" }}';

          const emailSubject = '{{ section.settings.email_subject | default: "New Review Submitted" }}';
          
          console.log('Email Settings:', { emailMethod, emailSubject });
          console.log('Review Data:', reviewData);
          
          // Create formatted email body
          const emailBody = `NEW REVIEW SUBMISSION

Review Details:
‚Ä¢ Customer Name: ${reviewData.name}
‚Ä¢ Rating: ${'‚≠ê'.repeat(reviewData.rating)} (${reviewData.rating}/5 stars)
‚Ä¢ Review Title: ${reviewData.title}
‚Ä¢ Review Text: ${reviewData.text}
‚Ä¢ Date Submitted: ${reviewData.date}

Store Information:
‚Ä¢ Product: {{ product.title | default: 'General Review' }}
‚Ä¢ Store: {{ shop.name }}
‚Ä¢ Submitted via: Website Review Form

---
This review was submitted through the review form on your website.
Please review and take appropriate action.`;
          
          try {
              // Using Shopify's contact form (Real Form - Most Reliable)
              sendViaRealForm(reviewData, emailBody, emailSubject);
          } catch (error) {
              console.error('Error sending review:', error);
              // Show error message
                              alert('There was an error submitting your review. Please try again.');
          }
          
          // Close modal and reset form
          closeModalFunc();
      }
      

      

      

      

      

        
        // Show success message with better UX
        function showSuccessMessage(message, duration = 3000) {
            // Get customizable settings
            const bgColor = '{{ section.settings.success_message_bg | default: "#4CAF50" }}';
            const textColor = '{{ section.settings.success_message_text | default: "#ffffff" }}';
            const position = '{{ section.settings.success_message_position | default: "top-right" }}';
            const fontSize = '{{ section.settings.success_message_font_size | default: "16" }}';
            const showIcon = {{ section.settings.success_message_show_icon | default: true }};
            
            // Create a success notification
            const successDiv = document.createElement('div');
            
            // Set position based on setting
            let positionCSS = '';
            let animation = '';
            
            switch(position) {
                case 'top-left':
                    positionCSS = 'top: 20px; left: 20px;';
                    animation = 'slideInLeft';
                    break;
                case 'bottom-right':
                    positionCSS = 'bottom: 20px; right: 20px;';
                    animation = 'slideInRight';
                    break;
                case 'bottom-left':
                    positionCSS = 'bottom: 20px; left: 20px;';
                    animation = 'slideInLeft';
                    break;
                case 'center':
                    positionCSS = 'top: 50%; left: 50%; transform: translate(-50%, -50%);';
                    animation = 'fadeIn';
                    break;
                default: // top-right
                    positionCSS = 'top: 20px; right: 20px;';
                    animation = 'slideInRight';
                    break;
            }
            
            successDiv.style.cssText = `
                position: fixed;
                ${positionCSS}
                background: ${bgColor};
                color: ${textColor};
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                font-size: ${fontSize}px;
                font-weight: 500;
                max-width: 400px;
                animation: ${animation} 0.3s ease-out;
                line-height: 1.4;
            `;
            
            // Add success icon if enabled
            let displayMessage = message;
            if (showIcon) {
                displayMessage = `<span style="margin-right: 8px; font-size: ${fontSize}px;">‚úì</span>${message}`;
            }
            
            // Allow HTML content in the message
            successDiv.innerHTML = displayMessage;
            
            // Add animation CSS
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOutRight {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
                @keyframes slideInLeft {
                    from { transform: translateX(-100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOutLeft {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(-100%); opacity: 0; }
                }
                @keyframes fadeIn {
                    from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
                    to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                }
                @keyframes fadeOut {
                    from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                    to { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(successDiv);
            
            // Remove after specified duration
            setTimeout(() => {
                let exitAnimation = '';
                switch(position) {
                    case 'top-left':
                    case 'bottom-left':
                        exitAnimation = 'slideOutLeft';
                        break;
                    case 'center':
                        exitAnimation = 'fadeOut';
                        break;
                    default:
                        exitAnimation = 'slideOutRight';
                        break;
                }
                
                successDiv.style.animation = `${exitAnimation} 0.3s ease-in`;
                
                setTimeout(() => {
                    if (successDiv.parentNode) {
                        document.body.removeChild(successDiv);
                    }
                }, 300);
            }, duration);
        }
        
                // Alternative Method: Create and submit a real form (most reliable)
        function sendViaRealForm(reviewData, emailBody, emailSubject) {
            console.log('üìß Attempting to send via real form submission...');
            
            try {
                // Create a real form element
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/contact';
                form.style.display = 'none';
                form.target = '_blank'; // Open in new tab to avoid page redirect
                
                // Add all required fields
                const fields = {
                    'form_type': 'contact',
                    'utf8': '‚úì',
                    'contact[email]': '{{ customer.email | default: "customer@example.com" }}',
                    'contact[name]': reviewData.name,
                    'contact[phone]': '',
                    'contact[body]': emailBody,
                    'contact[subject]': emailSubject,
                    'contact[tags]': 'Review Submission',
                    'contact[note]': `Product: {{ product.title | default: 'General Review' }}`
                };
                
                // Create input fields
                Object.keys(fields).forEach(key => {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = key;
                    input.value = fields[key];
                    form.appendChild(input);
                });
                
                // Add form to page and submit
                document.body.appendChild(form);
                
                // Submit the form
                form.submit();
                
                // Clean up after submission
                setTimeout(() => {
                    if (form.parentNode) {
                        document.body.removeChild(form);
                    }
                }, 1000);
                
                console.log('‚úÖ Real form submitted successfully');
                showSuccessMessage('Thank you for your review! It has been submitted successfully and will be forwarded to our team.');
                
                // Close modal after a short delay
                setTimeout(() => {
                    closeModalFunc();
                }, 2000);
                
            } catch (error) {
                console.error('‚ùå Error with real form submission:', error);
                // Show error message to user
                alert('There was an error submitting your review. Please try again.');
            }
        }
        

      

      {% endif %}
  });


</script>

<script>
  // Thumbnail Gallery Functionality
  document.addEventListener("DOMContentLoaded", function() {
    const thumbnailItems = document.querySelectorAll('.thumbnail-item');
    const reviewItems = document.querySelectorAll('.rw-container-contant');
    
    // Function to update thumbnail size CSS custom properties for all thumbnail galleries
    function updateThumbnailSize() {
      const thumbnailGalleries = document.querySelectorAll('.review-thumbnail-gallery');
      thumbnailGalleries.forEach(gallery => {
        const computedStyle = getComputedStyle(gallery);
        const thumbnailSize = computedStyle.getPropertyValue('--thumbnail-image-size');
        if (thumbnailSize) {
          gallery.style.setProperty('--thumbnail-size', thumbnailSize);
        }
      });
    }
    
    // Function to update image quality for all thumbnail galleries
    function updateImageQuality() {
      const thumbnailImages = document.querySelectorAll('.thumbnail-image');
      
      thumbnailImages.forEach(img => {
        const currentSrc = img.src;
        // Update src with new quality if it's a Shopify image URL
        if (currentSrc.includes('cdn.shopify.com')) {
          // Get the quality from the parent gallery's CSS custom property
          const gallery = img.closest('.review-thumbnail-gallery');
          if (gallery) {
            const computedStyle = getComputedStyle(gallery);
            const imageQuality = computedStyle.getPropertyValue('--thumbnail-image-size');
            if (imageQuality) {
              // For small thumbnails (60px), request higher quality images for crisp display
              const thumbnailSize = parseInt(imageQuality.replace('px', ''));
              const requestedQuality = thumbnailSize <= 80 ? thumbnailSize * 2 : thumbnailSize * 2;
              const newSrc = currentSrc.replace(/width=\d+/, `width=${requestedQuality}`);
              img.src = newSrc;
            }
          }
        }
      });
    }
    
    // Update thumbnail size on page load
    updateThumbnailSize();
    updateImageQuality();
    
    // Listen for theme editor changes
    if (typeof Shopify !== 'undefined' && Shopify.designMode) {
      document.addEventListener('shopify:section:load', function(event) {
        if (event.target.querySelector('.review-thumbnail-gallery')) {
          setTimeout(() => {
            updateThumbnailSize();
            updateImageQuality();
          }, 100);
        }
      });
      
      // Listen for block changes
      document.addEventListener('shopify:block:select', function(event) {
        if (event.target.querySelector('.review-thumbnail-gallery')) {
          setTimeout(() => {
            updateThumbnailSize();
            updateImageQuality();
          }, 100);
        }
      });
    }
    
    // Handle image loading states
    thumbnailItems.forEach((thumbnail) => {
      const img = thumbnail.querySelector('img');
      if (img) {
        // Add loading class initially
        thumbnail.classList.add('loading');
        
        // Handle image load
        img.addEventListener('load', function() {
          thumbnail.classList.remove('loading');
          // Ensure the image is visible
          img.style.opacity = '1';
          img.classList.add('loaded');
        });
        
        // Handle image error
        img.addEventListener('error', function() {
          thumbnail.classList.remove('loading');
          thumbnail.classList.add('empty');
          thumbnail.innerHTML = '<div>Image not available</div>';
        });
        
        // Handle image load event for already cached images
        if (img.complete && img.naturalWidth !== 0) {
          thumbnail.classList.remove('loading');
          img.style.opacity = '1';
          img.classList.add('loaded');
        }
        
        // Fallback timeout to prevent infinite loading
        setTimeout(() => {
          if (thumbnail.classList.contains('loading')) {
            thumbnail.classList.remove('loading');
            img.style.opacity = '1';
            img.classList.add('loaded');
          }
        }, 5000); // 5 second timeout
      }
    });
    
    // Click functionality to scroll to reviews
    thumbnailItems.forEach((thumbnail, index) => {
      thumbnail.addEventListener('click', function() {
        const reviewIndex = this.getAttribute('data-review-index');
        const targetReview = reviewItems[parseInt(reviewIndex) - 1];
        
        if (targetReview) {
          // Scroll to the target review with smooth animation
          targetReview.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
          });
          
          // Add a highlight effect to the target review
          targetReview.style.transition = 'all 0.3s ease';
          targetReview.style.transform = 'scale(1.02)';
          targetReview.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';
          
          // Remove the highlight effect after animation
          setTimeout(() => {
            targetReview.style.transform = 'scale(1)';
            targetReview.style.boxShadow = '';
          }, 2000);
        }
      });
      
      // Add keyboard navigation support
      thumbnail.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          this.click();
        }
      });
      
      // Make thumbnails focusable for accessibility
      thumbnail.setAttribute('tabindex', '0');
      thumbnail.setAttribute('role', 'button');
      thumbnail.setAttribute('aria-label', `View review ${this.getAttribute('data-review-index')}`);
    });
    
    // Add hover effect for better UX
    thumbnailItems.forEach((thumbnail) => {
      thumbnail.addEventListener('mouseenter', function() {
        this.style.transform = 'scale(1.05)';
        this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
      });
      
      thumbnail.addEventListener('mouseleave', function() {
        this.style.transform = 'scale(1)';
        this.style.boxShadow = '';
      });
    });
  });
</script>

<style>
    .checked {
    color: orange;
  }
      .top-review-box {
        margin-bottom:40px;
      }
      lr {
      border: none;
      height: 0rem;
      background-color: {{section.settings.rw_border}};
      display: block;
      margin: 0rem auto;
      width: 90%;
      }
         .noContent {
    color: #000 !important;
    background-color: transparent !important;
    pointer-events: none;
  }
    .rw-percent {
      color: {{section.settings.feature_svg_color}};
      font-size: 17px;
      font-weight: 700;
      padding: 0px 10px 3px 10px;
      border: 1px solid {{section.settings.feature_svg_color}};
      border-radius: 4px;
    }
      .rw-container {
      padding: 0px;
        -webkit-column-count: {{section.settings.review_column_desk}};
  	-webkit-column-gap: 15px;
  	-webkit-column-fill: balance;
  	-moz-column-count: {{section.settings.review_column_desk}};
  	-moz-column-gap: 15px;
  	-moz-column-fill: balance;
  	column-count: {{section.settings.review_column_desk}};
  	column-gap: 15px;
  	column-fill: balance;
  	/* Firefox specific fixes */
  	display: block;
  	position: relative;
    }
    @media screen and (max-width: 600px){
      .rw-container {
    column-count: {{section.settings.review_column_mobile}};
  	column-gap: 15px;
  	column-fill: balance;
    }
    }
    @media only screen and (min-width: 600px) and (max-width: 900px) {
     .rw-container {
    column-count: {{section.settings.review_column_tab}};
  	column-gap: 15px;
  	column-fill: balance;
    }
    }
       @media only screen and (min-width: 900px) and (max-width: 1150px) {
     .rw-container {
    column-count: {{section.settings.review_column_desk}};
  	column-gap: 15px;
  	column-fill: balance;
    }
       }

      .rating-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
  }
     .link-review {
      cursor: pointer !important;
      white-space: nowrap;
  }
      .review-wrapper {
      padding: {{section.settings.review_pd}}px;
      background:{{section.settings.review_bg}};
      margin-bottom: 0px;
      border-radius: {{ section.settings.border_radius }}px;
        {% if section.settings.show_border %}
      box-shadow: 0 0 0 1px {{section.settings.rw_border}};{% endif %}
  }
      @media screen and (max-width: 600px){
      .review-wrapper {
      padding: {{section.settings.review_pd_m}}px;
  }
      }
      .rw-sub-wrapper{
        margin-bottom: {{section.settings.rw_margin}}px;
      }
      .stars-rw {
        color: {{section.settings.feature_svg_color}};
        display: flex !important;
        gap: 0px;
      }
      .stars-rw svg {
        height: 1.4em;
        fill:{{section.settings.feature_svg_color}};
      }
      .verify-container{
      display: flex;
      align-items: center;
      column-gap: 5px;
      }
      .verify {
      color: {{section.settings.section_bg3}};
      font-size: 14px;
      position: relative;
      white-space: nowrap;
      line-height: 1;
  }
      .rw-date {
      font-size: {{ section.settings.date_size }}px;
      color: #8c8a91;
      white-space: nowrap;
      line-height: 1;
      text-transform: uppercase;
  }
      .rw-text-name {
      font-size: {{ section.settings.block_name_size}}px;
      }
      
      /* Customer Avatar and Country Flag Styles */
      .customer-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      
      .customer-avatar {
        flex-shrink: 0;
        overflow: hidden;
        position: relative;
      }
      
      .customer-avatar img {
        transition: transform 0.3s ease;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: crisp-edges !important;
        image-rendering: pixelated !important;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        filter: contrast(1.05) saturate(1.05);
      }
      
      .customer-avatar:hover img {
        transform: scale(1.05);
      }
      
      .customer-initials {
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        text-transform: uppercase;
      }
      
      .customer-details {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .country-flag {
        flex-shrink: 0;
        overflow: hidden;
       /* border: 1px solid rgba(0,0,0,0.1);*/
       margin-right: 5px;
      }
      
      .country-flag img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        margin-bottom: 10px;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }
      
      .country-flag img.error {
        opacity: 0.5;
        filter: grayscale(100%);
      }
      
      @media screen and (max-width: 600px) {
        .customer-info {
          gap: 8px;
        }
        
      /*  .customer-avatar {
          width: 40px !important;
          height: 40px !important;
        }*/
        
        .country-flag {
          width: 18px !important;
          height: 13px !important;
        }
      }
      
      /* High DPI Display Optimizations */
      @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
        .customer-avatar img,
        .popup-customer-avatar img,
        .country-flag img,
        .popup-country-flag img {
          image-rendering: -webkit-optimize-contrast !important;
          image-rendering: crisp-edges !important;
          image-rendering: pixelated !important;
          filter: contrast(1.1) saturate(1.1);
        }
      }
      
      /* Retina Display Specific Optimizations */
      @media (-webkit-min-device-pixel-ratio: 3), (min-resolution: 288dpi) {
        .customer-avatar img,
        .popup-customer-avatar img {
          image-rendering: -webkit-optimize-contrast !important;
          image-rendering: crisp-edges !important;
          image-rendering: pixelated !important;
          filter: contrast(1.15) saturate(1.15);
        }
      }
      
      /* Force High Quality on All Devices */
      .customer-avatar img,
      .popup-customer-avatar img {
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: crisp-edges !important;
        image-rendering: pixelated !important;
        -webkit-font-smoothing: antialiased !important;
        -moz-osx-font-smoothing: grayscale !important;
        will-change: transform;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        /* Force higher quality rendering */
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: crisp-edges !important;
        image-rendering: pixelated !important;
        /* Additional quality enhancements */
        filter: contrast(1.05) saturate(1.05);
        transform: scale(1.001);
        -webkit-transform: scale(1.001);
      }
      
      /* Additional Quality Enhancements */
      .customer-avatar {
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        will-change: transform;
        /* Force high quality rendering */
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: crisp-edges !important;
        image-rendering: pixelated !important;
      }
      
      /* Force image to render at higher quality using CSS transforms */
      .customer-avatar img {
        transform: scale(1.001) translateZ(0);
        -webkit-transform: scale(1.001) translateZ(0);
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: crisp-edges !important;
        image-rendering: pixelated !important;
        /* Force the browser to use the highest quality rendering */
        -webkit-font-smoothing: antialiased !important;
        -moz-osx-font-smoothing: grayscale !important;
        /* Additional quality filters */
        filter: contrast(1.02) saturate(1.02);
        /* Force high quality rendering on all devices */
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: crisp-edges !important;
        image-rendering: pixelated !important;
        /* Hardware acceleration */
        will-change: transform;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }
      
      /* High DPI specific optimizations */
      @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
        .customer-avatar img {
          transform: scale(1.002) translateZ(0);
          -webkit-transform: scale(1.002) translateZ(0);
          image-rendering: -webkit-optimize-contrast !important;
          image-rendering: crisp-edges !important;
          image-rendering: pixelated !important;
        }
      }
      
      /* Popup Modal Customer Display Styles */
      .popup-customer-avatar {
        position: relative;
        transition: transform 0.3s ease;
      }
      
      .popup-customer-avatar img {
        transition: all 0.3s ease;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
      }
      
      .popup-customer-avatar:hover {
        transform: scale(1.02);
      }
      
      .popup-customer-initials {
        position: absolute;
        top: 0;
        left: 0;
      }
      
      .popup-customer-name-flag {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      
      .popup-country-flag img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }
      
      /* Review Images Section in Popup */
      .review-popup-images {
        margin-top: 20px;
        border-top: 1px solid #f0f0f0;
        padding-top: 20px;
      }
      
      .review-popup-image {
        margin-bottom: 15px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }
      
      .review-popup-image img {
        width: 100%;
        height: auto;
        display: block;
      }
      .rw-text-head {
      font-size: {{ section.settings.block_head_size}}px;
      line-height: 120%;
      letter-spacing: 0px;
      padding: 5px 0 5px 0;
      text-align: center;
      border: none;
      text-align: left;
     }
      .rw-text-main {
      font-size: {{ section.settings.block_text_size}}px;
      /*white-space: pre-wrap;*/
      margin-bottom:30px;
      }
      .rw-text-footer {
      font-size: 14px;
      line-height: 1.4;
      padding: 20px 0 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      column-gap: 20px;
      border-top: 1px solid rgba(var(--color-badge-foreground), 0.03);
     }
      .main-review img:not(.customer-avatar img, .country-flag img, ) {
      width: 100%;
      max-width: {{ section.settings.rw_img_size}}px;
      height: auto;
      object-fit: contain;
      border-radius: {{ section.settings.rw_img_radius}}px;
      text-align: center;
      margin-right: 10px;
      margin-bottom:30px;
      line-height: 0;
      overflow: hidden;
     }
        .rw-container-contant {
     -webkit-column-break-inside: avoid;
  	-moz-column-break-inside: avoid;
  	column-break-inside: avoid;
  	page-break-inside: avoid;
  	break-inside: avoid;
  	/* Firefox specific fixes */
  	display: block;
  	position: relative;
  	overflow: visible;
  	/* Ensure proper spacing in Firefox */
  	margin-bottom: 15px;
      border-bottom: 0px solid #f3f3f3;
      border-radius: {{ section.settings.border_radius }}px;
      {% if request.design_mode and section.settings.editing %}display:block; {% else %} display: none; {% endif %}
    }

   
     .rw-container-contant:last-child {
      border-bottom: 0;
    }
  .load-more-container ul {
     list-style: none;
     padding:0;
    }
       .rw-text-footer {
      font-size: 13px;
      font-weight:500;
      line-height: 1.4;
      padding: 20px 0 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      column-gap: 20px;
      grid-gap: 10px;
     }

     .lm-text-clip {
      white-space: pre-wrap;
      width: -webkit-fill-available;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
     }
     
     /* Add Review Button and Modal Styles */
     .add-review-button:hover {
       transform: translateY(-2px);
       box-shadow: 0 4px 12px rgba(0,0,0,0.15);
     }
     
     .review-modal .modal-content {
       animation: modalSlideIn 0.3s ease-out;
     }
     
     @keyframes modalSlideIn {
       from {
         opacity: 0;
         transform: translateY(-50px);
       }
       to {
         opacity: 1;
         transform: translateY(0);
       }
     }
     
     .close-modal:hover {
       color: #333;
     }
     
     .star-label:hover {
       transform: scale(1.1);
     }
     
     .star-label:focus {
       outline: 2px solid #007cba;
       outline-offset: 2px;
     }
     
     .rating-display {
       transition: all 0.3s ease;
     }
     
     .rating-display.updated {
       color: #007cba;
       font-weight: 600;
     }
     
     .form-group input:focus,
     .form-group textarea:focus {
       outline: none;
       border-color: {{ section.settings.add_review_button_bg | default: '#000' }};
     }
     
     .cancel-btn:hover {
       background: #e5e5e5;
     }
     
     .submit-btn:hover {
       opacity: 0.9;
       transform: translateY(-1px);
     }
     
     .submit-btn:disabled {
       opacity: 0.6;
       cursor: not-allowed;
       transform: none;
     }
     
     .form-submitting {
       pointer-events: none;
       opacity: 0.7;
     }
     
     /* Review image aspect ratio preservation */
     .review-image {
       display: inline-block;
       max-width: 100%;
       height: auto;
       object-fit: contain;
       border-radius: {{ section.settings.rw_img_radius}}px;
     }
     
     /* Popup image container for better aspect ratio handling */
     .review-popup-image {
       display: flex;
       align-items: center;
       justify-content: center;
       overflow: hidden;
     }
     
     .review-popup-image img {
       max-width: 100%;
       max-height: 100%;
       width: auto;
       height: auto;
       object-fit: contain;
       transition: all 0.3s ease;
     }
</style>

{% schema %}
{
  "name": "Lumin Review",
   "disabled_on": {
  "groups": ["header", "footer", "custom.popup"]
   },
 "settings": [
   {
        "type": "header",
        "content": "t:sections.lumin-review.note"
      },
   {
        "type": "checkbox",
        "id": "editing",
        "label": "t:sections.lumin-review.edit_mode",
        "default": true,
        "info": "t:sections.lumin-review.edit_mode_info"
      },
   {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "background-1"
    },
   {
        "type": "header",
        "content": "t:sections.lumin-review.top_header"
      },
{
        "type": "text",
        "id": "header_text",
        "label": "t:sections.image-with-text.blocks.heading.name",
        "default": "t:sections.lumin-review.header_text"
      },
   {
        "type": "checkbox",
        "id": "show_top",
        "label": "t:sections.lumin-review.show_header_contents",
        "default": true
      },

   {
        "type": "inline_richtext",
        "id": "rating_text",
        "label": "t:sections.lumin-review.rating_text",
        "default": "4.8",
        "info": "t:sections.lumin-review.rating_text_info"
      },
   {
        "type":      "range",
        "id":        "rating_range",
        "min":       1,
        "max":        5,
        "step":       0.5,
        "label":     "t:sections.lumin-review.star_rating",
        "default":   4.5
     },
    {
    "type":      "range",
    "id":        "star_size_top",
    "min":       0.5,
    "max":        2,
    "step":       0.1,
    "label":     "t:sections.lumin-review.star_size",
    "default":   1
    },
    {
        "type": "inline_richtext",
        "id": "rating_count",
        "label": "t:sections.lumin-review.review_count",
        "default": "Based on 16 Reviews",
        "info": "t:sections.lumin-review.review_count_info"
      },
   {
        "type": "header",
        "content": "t:sections.lumin-review.section_settings"
      },

   {
        "type": "checkbox",
        "id": "show_customer_images",
        "label": "t:sections.lumin-review.show_customer_images",
        "default": true
      },
   {
        "type": "checkbox",
        "id": "show_country_flags",
        "label": "t:sections.lumin-review.show_country_flags",
        "default": true
      },
   {
        "type": "range",
        "id": "customer_image_size",
        "min": 10,
        "max": 100,
        "step": 5,
        "unit": "px",
        "label": "t:sections.lumin-review.customer_image_size",
        "default": 40
      },
   {
        "type": "range",
        "id": "customer_image_radius",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "t:sections.lumin-review.customer_image_radius",
        "default": 30
      },
   {
        "type": "color",
        "id": "customer_initials_bg",
        "label": "t:sections.lumin-review.customer_initials_bg",
        "default": "#FFD700"
      },
   {
        "type": "color",
        "id": "customer_initials_color",
        "label": "t:sections.lumin-review.customer_initials_color",
        "default": "#000000"
      },

{
        "type": "range",
        "id": "review_column_mobile",
        "label": "t:sections.lumin-review.review_column_mobile",
        "default": 1,
        "min": 1,
        "max": 3,
        "step": 1
      },
{
        "type": "range",
        "id": "review_column_tab",
        "label": "t:sections.lumin-review.review_column_tab",
        "default": 2,
        "min": 1,
        "max": 4,
        "step": 1
      },
{
        "type": "range",
        "id": "review_column_desk",
        "label": "t:sections.lumin-review.review_column_desk",
        "default": 3,
        "min": 1,
        "max": 8,
        "step": 1
      },
   {
        "type": "range",
        "id": "review_load",
        "label": "t:sections.lumin-review.load_more",
        "default": 6,
        "min": 1,
        "max": 20,
        "step": 1,
        "info": "t:sections.lumin-review.load_more_info"
      },
   {
        "type": "text",
        "id": "load_text",
        "label": "t:sections.lumin-review.button_text",
        "default": "Load More"
      },
    {
        "type": "header",
        "content": "t:sections.lumin-review.sizes"
      },
      {
    "type":      "range",
    "id":        "rw_img_size",
    "min":       20,
    "max":        400,
    "step":       10,
    "unit":       "px",
    "label":     "t:sections.lumin-review.review_image_size",
    "default":   90
 },
     {
    "type":      "range",
    "id":        "rw_img_radius",
    "min":       0,
    "max":        100,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.image_radius",
    "default":   6
 },
   {
    "type":      "range",
    "id":        "block_name_size",
    "min":       10,
    "max":        100,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.customer_name_size",
    "default":   20
},
        {
    "type":      "range",
    "id":        "date_size",
    "min":       6,
    "max":        50,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.date_size",
    "default":   12
},
 {
    "type":      "range",
    "id":        "block_head_size",
    "min":       10,
    "max":        100,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.review_heading_size",
    "default":   18
},
    {
    "type":      "range",
    "id":        "block_text_size",
    "min":       6,
    "max":        100,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.review_text_size",
    "default":   14
},
   {
        "type": "header",
        "content": "t:sections.lumin-review.stars"
      },
   {
      "type": "select",
      "id": "star_style",
      "label": "t:sections.lumin-review.star_style",
      "options": [
        {
          "value": "star",
          "label": "t:sections.lumin-review.star_style_stars"
        },
        {
          "value": "star_bg",
          "label": "t:sections.lumin-review.star_style_colors"
        },
        {
          "value": "star_bg_2",
          "label": "t:sections.lumin-review.star_style_crisp"
        }
      ],
      "default": "star"
    },
    {
    "type":      "range",
    "id":        "star_size",
    "min":       0.5,
    "max":        2,
    "step":       0.1,
    "label":     "t:sections.lumin-review.star_size",
    "default":   0.7
},
    {
    "type":      "range",
    "id":        "star_radius",
    "min":       0,
    "max":        30,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.star_corner_radius",
    "default":   0
},
   {
        "type": "color",
        "id": "feature_svg_color",
        "label": "t:sections.lumin-review.star_color",
        "default": "#000"
      },
   {
        "type": "color",
        "id": "inactive_star_color",
        "label": "t:sections.lumin-review.disable_star_color",
        "default": "#e2e2e2"
      },
   {
        "type": "header",
        "content": "t:sections.lumin-review.colors"
      },
   {
        "type": "checkbox",
        "id": "show_border",
        "label": "t:sections.lumin-review.show_border",
        "default": true
      },
{
        "type": "color",
        "id": "rw_border",
        "label": "t:sections.lumin-review.border",
        "default": "#f2f2f2"
      },
   {
    "type":      "range",
    "id":        "border_radius",
    "min":       0,
    "max":        100,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.corner_radius",
    "default":   10
},
{
        "type": "color",
        "id": "section_bg3",
        "label": "t:sections.lumin-review.verify_text_color",
        "default": "#000"
      },
{
        "type": "color",
        "id": "section_bg2",
        "label": "t:sections.lumin-review.verify_badge_color",
        "default": "#000"
      },
   {
        "type": "text",
        "id": "verify_text",
        "label": "t:sections.lumin-review.verify_text",
        "default": "Verified Buyer",
        "info": "t:sections.lumin-review.verify_text_info"
      },
{
        "type": "color",
        "id": "review_bg",
        "label": "t:sections.lumin-review.review_background",
        "default": "#fff"
      },

   {
        "type": "color",
        "id": "feature_acc_color",
        "label": "t:sections.lumin-review.accent_color",
        "default": "#000"
      },
   {
      "type": "range",
      "id": "review_pd",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "t:sections.lumin-review.review_padding",
      "default": 20
    },
   {
      "type": "range",
      "id": "review_pd_m",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "t:sections.lumin-review.review_padding_mobile",
      "default": 20
    },
   {
        "type": "header",
        "content": "t:sections.lumin-review.review_footer"
      },
     {
        "type": "checkbox",
        "id": "show_footer",
        "label": "t:sections.lumin-review.show_review_footer",
        "default": true
      },
     {
        "type": "checkbox",
        "id": "show_product",
        "label": "t:sections.lumin-review.show_product",
        "default": true
      },
    {
      "type": "range",
      "id": "product_image_radius",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Product image radius",
      "default": 4
    },
      {
        "type": "text",
        "id": "like_text",
        "label": "t:sections.lumin-review.like_dislike_text",
        "default": "Was this helpful?",
        "info": "t:sections.lumin-review.like_dislike_text_info"
      },
   {
        "type": "header",
        "content": "t:sections.lumin-review.add_review_functionality"
      },
   {
        "type": "checkbox",
        "id": "show_add_review_button",
        "label": "t:sections.lumin-review.show_add_review_button",
        "default": true
      },
      {
        "type": "inline_richtext",
        "id": "review_cta_heading",
        "label": "t:sections.lumin-review.review_cta_heading",
        "default": "t:sections.lumin-review.review_cta_heading"
      },
   {
        "type": "inline_richtext",
        "id": "review_cta_subtext",
        "label": "t:sections.lumin-review.review_cta_subtext",
        "default": "t:sections.lumin-review.review_cta_subtext"
      },
   {
        "type": "inline_richtext",
        "id": "add_review_button_text",
        "label": "t:sections.lumin-review.add_review_button_text",
        "default": "t:sections.lumin-review.add_review_button_text"
      },
        {
          "type": "color",
          "id": "review_cta_heading_color",
          "label": "t:sections.lumin-review.review_cta_heading_color",
          "default": "#333"
        },
   {
        "type": "color",
        "id": "review_cta_subtext_color",
        "label": "t:sections.lumin-review.review_cta_subtext_color",
        "default": "#666"
      },
      {
        "type": "color",
        "id": "add_review_button_bg",
        "label": "t:sections.lumin-review.review_cta_button_bg",
        "default": "#000"
      },
   {
        "type": "color",
        "id": "add_review_button_text_color",
        "label": "t:sections.lumin-review.add_review_button_text_color",
        "default": "#fff"
      },
   {
        "type": "header",
        "content": "t:sections.lumin-review.modal_settings"
      },
   {
        "type": "text",
        "id": "modal_title",
        "label": "t:sections.lumin-review.modal_title",
        "default": "t:sections.lumin-review.modal_title"
      },
   {
        "type": "text",
        "id": "name_label",
        "label": "t:sections.lumin-review.name_field_label",
        "default": "Your Name"
      },
   {
        "type": "text",
        "id": "rating_label",
        "label": "t:sections.lumin-review.rating_field_label",
        "default": "Rating"
      },
   {
        "type": "text",
        "id": "title_label",
        "label": "t:sections.lumin-review.title_field_label",
        "default": "Review Title"
      },
   {
        "type": "text",
        "id": "review_label",
        "label": "t:sections.lumin-review.review_field_label",
        "default": "Your Review"
      },
   {
        "type": "text",
        "id": "email_label",
        "label": "t:sections.lumin-review.email_field_label",
        "default": "Your Email"
      },
   {
        "type": "header",
        "content": "t:sections.lumin-review.date_format_settings"
      },
   {
        "type": "select",
        "id": "date_format",
        "label": "t:sections.lumin-review.date_display_format",
        "options": [
          {
            "value": "detailed",
            "label": "t:sections.lumin-review.date_format_detailed"
          },
          {
            "value": "simple",
            "label": "t:sections.lumin-review.date_format_simple"
          },
          {
            "value": "short",
            "label": "t:sections.lumin-review.date_format_short"
          }
        ],
        "default": "detailed",
        "info": "t:sections.lumin-review.date_format_info"
      },
   {
        "type": "text",
        "id": "cancel_button_text",
        "label": "t:sections.lumin-review.cancel_button_text",
        "default": "Cancel"
      },
   {
        "type": "text",
        "id": "submit_button_text",
        "label": "t:sections.lumin-review.submit_button_text",
        "default": "Submit Review"
      },
   {
        "type": "header",
        "content": "t:sections.lumin-review.success_message_settings"
      },
   {
        "type": "text",
        "id": "success_message_title",
        "label": "t:sections.lumin-review.success_message_title",
        "default": "t:sections.lumin-review.success_message_title"
      },
   {
        "type": "textarea",
        "id": "success_message_body",
        "label": "t:sections.lumin-review.success_message_body",
        "default": "t:sections.lumin-review.success_message_body",
        "info": "t:sections.lumin-review.success_message_body_info"
      },
   {
        "type": "text",
        "id": "success_message_duration",
        "label": "t:sections.lumin-review.success_message_duration",
        "default": "3",
        "info": "t:sections.lumin-review.success_message_duration_info"
      },
   {
        "type": "color",
        "id": "success_message_bg",
        "label": "t:sections.lumin-review.success_message_bg",
        "default": "#4CAF50"
      },
   {
        "type": "color",
        "id": "success_message_text",
        "label": "t:sections.lumin-review.success_message_text",
        "default": "#ffffff"
      },
   {
        "type": "select",
        "id": "success_message_position",
        "label": "t:sections.lumin-review.success_message_position",
        "options": [
          {
            "value": "top-right",
            "label": "t:sections.lumin-review.success_message_position_top_right"
          },
          {
            "value": "top-left",
            "label": "t:sections.lumin-review.success_message_position_top_left"
          },
          {
            "value": "bottom-right",
            "label": "t:sections.lumin-review.success_message_position_bottom_right"
          },
          {
            "value": "bottom-left",
            "label": "t:sections.lumin-review.success_message_position_bottom_left"
          },
          {
            "value": "center",
            "label": "t:sections.lumin-review.success_message_position_center"
          }
        ],
        "default": "top-right",
        "info": "t:sections.lumin-review.success_message_position_info"
      },
   {
        "type": "range",
        "id": "success_message_font_size",
        "label": "t:sections.lumin-review.success_message_font_size",
        "min": 12,
        "max": 24,
        "step": 1,
        "default": 16,
        "unit": "px"
      },
   {
        "type": "checkbox",
        "id": "success_message_show_icon",
        "label": "t:sections.lumin-review.success_message_show_icon",
        "default": true,
        "info": "t:sections.lumin-review.success_message_show_icon_info"
      },
   {
        "type": "header",
        "content": "t:sections.lumin-review.email_settings"
      },

   {
        "type": "text",
        "id": "email_subject",
        "label": "t:sections.lumin-review.email_subject_line",
        "default": "New Review Submitted"
      },
         {
        "type": "select",
        "id": "email_method",
        "label": "t:sections.lumin-review.email_method",
        "options": [
          {
            "value": "real_form",
            "label": "t:sections.lumin-review.email_method_shopify_contact"
          }
        ],
        "default": "real_form",
        "info": "t:sections.lumin-review.email_method_info"
      },

   {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
   {
      "type": "range",
      "id": "rw_margin",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.lumin-review.margin_bottom",
      "default": 0
    },
   {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    },
    {
        "type": "header",
        "content": "t:sections.lumin-review.review_popup_modal"
      },
   {
        "type": "checkbox",
        "id": "enable_review_popup",
        "label": "t:sections.lumin-review.enable_review_popup",
        "default": true,
        "info": "t:sections.lumin-review.enable_review_popup_info"
      },
   {
        "type": "text",
        "id": "popup_helpful_text",
        "label": "t:sections.lumin-review.popup_helpful_text",
        "default": "Was this helpful?",
        "info": "t:sections.lumin-review.popup_helpful_text_info"
      },
   {
        "type": "checkbox",
        "id": "show_popup_helpful_buttons",
        "label": "t:sections.lumin-review.show_popup_helpful_buttons",
        "default": true,
        "info": "t:sections.lumin-review.show_popup_helpful_buttons_info"
      },
   {
        "type": "checkbox",
        "id": "show_popup_product_info",
        "label": "t:sections.lumin-review.show_popup_product_info",
        "default": true,
        "info": "t:sections.lumin-review.show_popup_product_info_info"
      },
   {
        "type": "select",
        "id": "popup_image_quality",
        "label": "t:sections.lumin-review.popup_image_quality",
        "options": [
          {
            "value": "600",
            "label": "t:sections.lumin-review.popup_image_quality_high"
          },
          {
            "value": "800",
            "label": "t:sections.lumin-review.popup_image_quality_very_high"
          },
          {
            "value": "1000",
            "label": "t:sections.lumin-review.popup_image_quality_ultra_high"
          },
          {
            "value": "1200",
            "label": "t:sections.lumin-review.popup_image_quality_maximum"
          }
        ],
        "default": "800",
        "info": "t:sections.lumin-review.popup_image_quality_info"
      },
   {
        "type": "range",
        "id": "popup_customer_image_size",
        "min": 10,
        "max": 100,
        "step": 5,
        "unit": "px",
        "label": "t:sections.lumin-review.popup_customer_image_size",
        "default": 60,
        "info": "t:sections.lumin-review.popup_customer_image_size_info"
      },
   {
        "type": "checkbox",
        "id": "enable_image_enlarge",
        "label": "t:sections.lumin-review.enable_image_enlarge",
        "default": true,
        "info": "t:sections.lumin-review.enable_image_enlarge_info"
      }


],

  "max_blocks": 30,
  "blocks": [ 
    {
        "type": "thumbnail_gallery",
        "name": "t:sections.lumin-review.thumbnail_gallery",
        "settings": [
          {
            "type": "header",
            "content": "t:sections.lumin-review.thumbnail_gallery_settings"
          },
          {
            "type": "select",
            "id": "thumbnail_align",
            "label": "t:sections.lumin-review.thumbnail_alignment",
            "options": [
              {
                "value": "left",
                "label": "t:sections.lumin-review.thumbnail_alignment_left"
              },
              {
                "value": "center",
                "label": "t:sections.lumin-review.thumbnail_alignment_center"
              },
              {
                "value": "right",
                "label": "t:sections.lumin-review.thumbnail_alignment_right"
              }
            ],
            "default": "center"
          },
          {
            "type": "text",
            "id": "gallery_title",
            "label": "t:sections.lumin-review.gallery_title",
            "default": "Customer Reviews",
            "info": "t:sections.lumin-review.gallery_title_info"
          },
          {
            "type": "color",
            "id": "gallery_bg",
            "label": "t:sections.lumin-review.gallery_background",
            "default": "#f8f8f8"
          },
          {
            "type": "color",
            "id": "gallery_title_color",
            "label": "t:sections.lumin-review.title_color",
            "default": "#333"
          },
          {
            "type": "color",
            "id": "gallery_accent_color",
            "label": "t:sections.lumin-review.accent_color",
            "default": "#000",
            "info": "t:sections.lumin-review.accent_color_info"
          },
          {
            "type": "range",
            "id": "border_thickness",
            "min": 0,
            "max": 4,
            "step": 1,
            "unit": "px",
            "label": "t:sections.lumin-review.thumbnail_border_thickness",
            "default": 0
          },
          {
            "type": "range",
            "id": "border_radius",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "t:sections.lumin-review.thumbnail_border_radius",
            "default": 8
          },
          {
            "type": "range",
            "id": "image_size",
            "min": 40,
            "max": 200,
            "step": 10,
            "unit": "px",
            "label": "t:sections.lumin-review.thumbnail_image_size",
            "default": 60
          }
        ]
      },
    {
        "type": "rating_summary",
        "name": "t:sections.lumin-review.rating_summary",
        "settings": [
          {
            "type": "header",
            "content": "t:sections.lumin-review.rating_summary_content"
          },
          {
            "type": "text",
            "id": "rating_summary_score",
            "label": "t:sections.lumin-review.overall_rating_score",
            "default": "4.8"
          },
          {
            "type": "text",
            "id": "rating_summary_total",
            "label": "t:sections.lumin-review.total_reviews_text",
            "default": "731 Reviews"
          },
          {
            "type": "header",
            "content": "t:sections.lumin-review.five_star_rating_bar"
          },
          {
            "type": "range",
            "id": "rating_bar_5_width",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "t:sections.lumin-review.five_star_bar_width",
            "default": 85
          },
          {
            "type": "text",
            "id": "rating_bar_5_count",
            "label": "t:sections.lumin-review.five_star_count",
            "default": "624"
          },
          {
            "type": "header",
            "content": "t:sections.lumin-review.four_star_rating_bar"
          },
          {
            "type": "range",
            "id": "rating_bar_4_width",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "t:sections.lumin-review.four_star_bar_width",
            "default": 14
          },
          {
            "type": "text",
            "id": "rating_bar_4_count",
            "label": "t:sections.lumin-review.four_star_count",
            "default": "104"
          },
          {
            "type": "header",
            "content": "t:sections.lumin-review.three_star_rating_bar"
          },
          {
            "type": "range",
            "id": "rating_bar_3_width",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "t:sections.lumin-review.three_star_bar_width",
            "default": 1
          },
          {
            "type": "text",
            "id": "rating_bar_3_count",
            "label": "t:sections.lumin-review.three_star_count",
            "default": "3"
          },
          {
            "type": "header",
            "content": "t:sections.lumin-review.two_star_rating_bar"
          },
          {
            "type": "range",
            "id": "rating_bar_2_width",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "t:sections.lumin-review.two_star_bar_width",
            "default": 0
          },
          {
            "type": "text",
            "id": "rating_bar_2_count",
            "label": "t:sections.lumin-review.two_star_count",
            "default": "0"
          },
          {
            "type": "header",
            "content": "t:sections.lumin-review.one_star_rating_bar"
          },
          {
            "type": "range",
            "id": "rating_bar_1_width",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "t:sections.lumin-review.one_star_bar_width",
            "default": 0
          },
          {
            "type": "text",
            "id": "rating_bar_1_count",
            "label": "t:sections.lumin-review.one_star_count",
            "default": "0"
          },
          {
            "type": "header",
            "content": "t:sections.lumin-review.rating_summary_colors"
          },
          {
            "type": "range",
            "id": "rating_summary_border_radius",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "t:settings_schema.global.settings.corner_radius.label",
            "default": 12
          },
          {
            "type": "color",
            "id": "rating_summary_bg",
            "label": "t:sections.lumin-review.background_color",
            "default": "#fafafa"
          },
          {
            "type": "color",
            "id": "rating_summary_score_color",
            "label": "t:sections.lumin-review.score_color",
            "default": "#333"
          },
          {
            "type": "color",
            "id": "rating_summary_text_color",
            "label": "t:sections.lumin-review.text_color",
            "default": "#666"
          },
          {
            "type": "color",
            "id": "rating_bar_bg",
            "label": "t:sections.lumin-review.progress_bar_background",
            "default": "#e5e5e5"
          },
          {
            "type": "color",
            "id": "rating_bar_fill",
            "label": "t:sections.lumin-review.progress_bar_fill",
            "default": "#333"
          },
          {
            "type": "color",
            "id": "rating_summary_border_color",
            "label": "t:sections.lumin-review.filter_icon_border",
            "default": "#ddd"
          }
        ]
      },
    {
        "type": "review",
        "name": "t:sections.lumin-review.review",
        "settings": [
          {
            "type": "header",
            "content": "t:sections.lumin-review.product_selection"
          },
          {
            "type": "product",
            "id": "selected_product",
            "label": "t:sections.lumin-review.product",
            "info": "t:sections.lumin-review.product_info"
          },

          {
            "type": "header",
            "content": "t:sections.lumin-review.review_content"
          },
          {
        "type": "image_picker",
        "id": "img_block",
        "label": "t:sections.lumin-review.image"
      },
          {
        "type": "image_picker",
        "id": "img_block2",
        "label": "t:sections.lumin-review.image"
      },
             {
    "type":      "range",
    "id":        "star_rating",
    "min":       1,
    "max":        5,
    "step":       0.5,
    "label":     "t:sections.lumin-review.star_rating",
    "default":   5
 },
          {
        "type": "text",
        "id": "name_text",
        "label": "t:sections.lumin-review.name",
        "default": "Johan D."
      },
          {
        "type": "image_picker",
        "id": "customer_image",
        "label": "t:sections.lumin-review.customer_image",
        "info": "t:sections.lumin-review.customer_image_info"
      },
          {
        "type": "text",
        "id": "country_code",
        "label": "t:sections.lumin-review.country_code",
        "default": "US",
        "info": "t:sections.lumin-review.country_code_info"
      },
          {
        "type": "checkbox",
        "id": "show_country_flag",
        "label": "t:sections.lumin-review.show_country_flag",
        "default": true
      },
          {
        "type": "text",
        "id": "date_text",
        "label": "t:sections.lumin-review.date",
        "default": "June 2025"
      },
{
        "type": "text",
        "id": "review_head",
        "label": "t:sections.lumin-review.review_title",
        "default": "Nice Product"
      },
{
        "type": "text",
        "id": "review_text",
        "label": "t:sections.lumin-review.review_text",
        "default": "Nice Product. I'm happy with my purchase."
      },
          {
    "type":      "range",
    "id":        "like_size",
    "min":       0,
    "max":        100,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.likes",
    "default":   0
},
                  {
    "type":      "range",
    "id":        "dislike_size",
    "min":       0,
    "max":        100,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.dislikes",
    "default":   0
},
{
    "type":      "range",
    "id":        "feature_font_size",
    "min":       10,
    "max":        50,
    "step":       1,
    "unit":       "px",
    "label":     "t:sections.lumin-review.font_size",
    "default":   16
}
]
}
],

  "presets": [
    {
      "name": "Lumin Review",
      "category": "Lumin Sections",
      "blocks": [
        {
          "type": "rating_summary"
        },
        {
          "type": "thumbnail_gallery"
        },
        {
          "type": "review"
        },
        {
          "type": "review"
        },
        {
          "type": "review"
        },
        {
          "type": "review"
        },
        {
          "type": "review"
        },
        {
          "type": "review"
        }
      ]
    }
  ]
}
{% endschema %}
